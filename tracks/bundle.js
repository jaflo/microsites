var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function m(){return d("")}function h(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function g(t){return function(e){return e.preventDefault(),t.call(this,e)}}function p(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function b(t,e){(null!=e||t.value)&&(t.value=e)}function q(t,e,n){t.classList[n?"add":"remove"](e)}let v;function $(t){v=t}function k(){const t=v;return(e,n)=>{const a=t.$$.callbacks[e];if(a){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);a.slice().forEach(e=>{e.call(t,s)})}}}function y(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const x=[],w=[],N=[],j=[],C=Promise.resolve();let E=!1;function S(t){N.push(t)}function O(){const t=new Set;do{for(;x.length;){const t=x.shift();$(t),A(t.$$)}for(;w.length;)w.pop()();for(let e=0;e<N.length;e+=1){const n=N[e];t.has(n)||(n(),t.add(n))}N.length=0}while(x.length);for(;j.length;)j.pop()();E=!1}function A(t){t.fragment&&(t.update(t.dirty),a(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(S))}const z=new Set;let I;function L(){I={r:0,c:[],p:I}}function M(){I.r||a(I.c),I=I.p}function T(t,e){t&&t.i&&(z.delete(t),t.i(e))}function B(t,e,n,a){if(t&&t.o){if(z.has(t))return;z.add(t),I.c.push(()=>{z.delete(t),a&&(n&&t.d(1),a())}),t.o(e)}}const D="undefined"!=typeof window?window:global;function P(t,e){B(t,1,1,()=>{e.delete(t.key)})}function U(t,n,r){const{fragment:i,on_mount:o,on_destroy:c,after_update:l}=t.$$;i.m(n,r),S(()=>{const n=o.map(e).filter(s);c?c.push(...n):a(n),t.$$.on_mount=[]}),l.forEach(S)}function R(t,e){t.$$.fragment&&(a(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function Y(t,e){t.$$.dirty||(x.push(t),E||(E=!0,C.then(O)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function V(e,s,r,i,o,c){const l=v;$(e);const u=s.props||{},d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var m;d.ctx=r?r(e,u,(t,n)=>{d.ctx&&o(d.ctx[t],d.ctx[t]=n)&&(d.bound[t]&&d.bound[t](n),f&&Y(e,t))}):u,d.update(),f=!0,a(d.before_update),d.fragment=i(d.ctx),s.target&&(s.hydrate?d.fragment.l((m=s.target,Array.from(m.childNodes))):d.fragment.c(),s.intro&&T(e.$$.fragment),U(e,s.target,s.anchor),O()),$(l)}class F{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function G(e){var n,a;return{c(){n=u("a"),a=d("View lyrics"),p(n,"href",e.track_share_url),p(n,"target","_blank")},m(t,e){o(t,n,e),i(n,a)},p:t,d(t){t&&c(n)}}}function H(e){var n;return{c(){(n=u("span")).textContent="No lyrics available",p(n,"class","red svelte-gp6epy")},m(t,e){o(t,n,e)},p:t,d(t){t&&c(n)}}}function J(e){var n,a,s,r,l,m,g,_,b,v,$;function k(t,e){return 0==e.has_lyrics?H:G}var y=k(0,e),x=y(e);return{c(){n=u("label"),a=u("input"),l=f(),m=u("strong"),g=d(e.track_name),_=d("\n  by "),b=d(e.artist_name),v=f(),x.c(),p(a,"type",s=e.album?"checkbox":"radio"),a.value=e.i,p(a,"name",r="q"+e.qid),p(a,"id","t"+e.track_id),a.disabled=0==e.has_lyrics,a.checked=e.album,p(n,"for","t"+e.track_id),p(n,"class","svelte-gp6epy"),q(n,"faded",0==e.has_lyrics),$=h(a,"change",e.changed)},m(t,e){o(t,n,e),i(n,a),i(n,l),i(n,m),i(m,g),i(n,_),i(n,b),i(n,v),x.m(n,null)},p(t,e){t.album&&s!==(s=e.album?"checkbox":"radio")&&p(a,"type",s),t.i&&(a.value=e.i),t.qid&&r!==(r="q"+e.qid)&&p(a,"name",r),t.album&&(a.checked=e.album),y===(y=k(0,e))&&x?x.p(t,e):(x.d(1),(x=y(e))&&(x.c(),x.m(n,null))),t.has_lyrics&&q(n,"faded",0==e.has_lyrics)},i:t,o:t,d(t){t&&c(n),x.d(),$()}}}function K(t,e,n){const a=k();let{song:s,i:r,qid:i,album:o=!1}=e,{track_id:c,track_name:l,artist_name:u,album_name:d,has_lyrics:f,track_share_url:m}=s;return t.$set=(t=>{"song"in t&&n("song",s=t.song),"i"in t&&n("i",r=t.i),"qid"in t&&n("qid",i=t.qid),"album"in t&&n("album",o=t.album)}),{song:s,i:r,qid:i,album:o,track_id:c,track_name:l,artist_name:u,has_lyrics:f,track_share_url:m,changed:function(t){t.target.checked?a("select",{track:c,query_index:i,title:l,artist:u}):a("select",{track:-1,query_index:i})}}}class Q extends F{constructor(t){super(),V(this,t,K,J,r,["song","i","qid","album"])}}function W(t,e,n){const a=Object.create(t);return a.song=e[n],a.i=n,a}function X(t){var e;return{c(){e=d("No results")},m(t,n){o(t,e,n)},d(t){t&&c(e)}}}function Z(t){var e,n=new Q({props:{song:t.song,qid:t.qid,i:t.i}});return n.$on("select",t.select_handler),{c(){n.$$.fragment.c()},m(t,a){U(n,t,a),e=!0},p(t,e){var a={};t.songs&&(a.song=e.song),t.qid&&(a.qid=e.qid),n.$set(a)},i(t){e||(T(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function tt(t){for(var e,n,a,s,r,g,_,b,q,v,$=t.songs,k=[],y=0;y<$.length;y+=1)k[y]=Z(W(t,$,y));const x=t=>B(k[t],1,1,()=>{k[t]=null});var w=null;return $.length||(w=X()).c(),{c(){e=u("label"),n=u("input"),r=d("\n  Do not save"),_=f();for(var i=0;i<k.length;i+=1)k[i].c();b=m(),p(n,"type","radio"),n.value=-1,p(n,"name",a="q"+t.qid),p(n,"id",s=t.qid+"-skip"),n.checked=!0,p(e,"for",g=t.qid+"-skip"),v=h(n,"change",t.change_handler)},m(t,a){o(t,e,a),i(e,n),i(e,r),o(t,_,a);for(var s=0;s<k.length;s+=1)k[s].m(t,a);o(t,b,a),w&&w.m(t,a),q=!0},p(t,r){if(q&&!t.qid||a===(a="q"+r.qid)||p(n,"name",a),q&&!t.qid||s===(s=r.qid+"-skip")||p(n,"id",s),q&&!t.qid||g===(g=r.qid+"-skip")||p(e,"for",g),t.songs||t.qid){$=r.songs;for(var i=0;i<$.length;i+=1){const e=W(r,$,i);k[i]?(k[i].p(t,e),T(k[i],1)):(k[i]=Z(e),k[i].c(),T(k[i],1),k[i].m(b.parentNode,b))}for(L(),i=$.length;i<k.length;i+=1)x(i);M()}$.length?w&&(w.d(1),w=null):w||((w=X()).c(),w.m(b.parentNode,b))},i(t){if(!q){for(var e=0;e<$.length;e+=1)T(k[e]);q=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)B(k[t]);q=!1},d(t){t&&(c(e),c(_)),l(k,t),t&&c(b),w&&w.d(t),v()}}}function et(t,e,n){const a=k();let{q:s,qid:r,songs:i}=e;return t.$set=(t=>{"q"in t&&n("q",s=t.q),"qid"in t&&n("qid",r=t.qid),"songs"in t&&n("songs",i=t.songs)}),{dispatch:a,q:s,qid:r,songs:i,select_handler:function(e){y(t,e)},change_handler:function(t){t.target.checked&&a("select",{track:-1,query_index:r})}}}class nt extends F{constructor(t){super(),V(this,t,et,tt,r,["q","qid","songs"])}}const at="34f99f63255db699b1a1497c899540f9",st="https://cors-anywhere.herokuapp.com/https://api.musixmatch.com/ws/1.1/";function rt(t){return t.apikey=at,Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}const it=t=>fetch(st+"track.search?"+rt(t)).then(t=>t.json()).then(t=>t.message.body.track_list),ot=t=>fetch(st+"artist.search?"+rt(t)).then(t=>t.json()).then(t=>t.message.body.artist_list),ct=t=>fetch(st+"artist.albums.get?"+rt(t)).then(t=>t.json()).then(t=>t.message.body.album_list),lt=t=>fetch(st+"album.tracks.get?"+rt(t)).then(t=>t.json()).then(t=>t.message.body.track_list);function ut(t,e,n){const a=Object.create(t);return a.song=e[n],a.i=n,a}function dt(t,e,n){const a=Object.create(t);return a.album=e[n],a}function ft(t,e,n){const a=Object.create(t);return a.a=e[n],a}function mt(t){var e,n,a,s,r=t.a.artist_alias_list.map($t).join(", ")+"";return{c(){e=u("em"),n=d("(also known as "),a=d(r),s=d(")")},m(t,r){o(t,e,r),i(e,n),i(e,a),i(e,s)},p(t,e){t.artists&&r!==(r=e.a.artist_alias_list.map($t).join(", ")+"")&&_(a,r)},d(t){t&&c(e)}}}function ht(t){var e,n,a,s,r,l,m,g,b,q,v,$,k,y=t.a.artist_name+"",x=vt(t.a.artist_country)+"",w=t.a.artist_alias_list.length>0&&mt(t);return{c(){e=u("div"),n=u("input"),l=f(),m=u("a"),g=d(y),q=f(),v=d(x),$=f(),w&&w.c(),t.$$binding_groups[1].push(n),p(n,"type","radio"),n.__value=a=t.a.artist_id,n.value=n.__value,p(n,"name",s="q"+t.qid),p(n,"id",r=t.qid+"-"+t.a.artist_id),p(m,"href",b="https://www.musixmatch.com/artist/"+t.a.artist_id),p(m,"target","_blank"),k=h(n,"change",t.input_change_handler)},m(a,s){o(a,e,s),i(e,n),n.checked=n.__value===t.selected,i(e,l),i(e,m),i(m,g),i(e,q),i(e,v),i(e,$),w&&w.m(e,null)},p(t,i){t.selected&&(n.checked=n.__value===i.selected),t.artists&&a!==(a=i.a.artist_id)&&(n.__value=a),n.value=n.__value,t.qid&&s!==(s="q"+i.qid)&&p(n,"name",s),(t.qid||t.artists)&&r!==(r=i.qid+"-"+i.a.artist_id)&&p(n,"id",r),t.artists&&y!==(y=i.a.artist_name+"")&&_(g,y),t.artists&&b!==(b="https://www.musixmatch.com/artist/"+i.a.artist_id)&&p(m,"href",b),t.artists&&x!==(x=vt(i.a.artist_country)+"")&&_(v,x),i.a.artist_alias_list.length>0?w?w.p(t,i):((w=mt(i)).c(),w.m(e,null)):w&&(w.d(1),w=null)},d(a){a&&c(e),t.$$binding_groups[1].splice(t.$$binding_groups[1].indexOf(n),1),w&&w.d(),k()}}}function gt(t){for(var e,n,a,s,r,h,g,p=t.albums,b=[],q=0;q<p.length;q+=1)b[q]=bt(dt(t,p,q));const v=t=>B(b[t],1,1,()=>{b[t]=null});return{c(){e=u("h4"),n=d("Albums ("),a=d(t.selected),s=d(")"),r=f();for(var i=0;i<b.length;i+=1)b[i].c();h=m()},m(t,c){o(t,e,c),i(e,n),i(e,a),i(e,s),o(t,r,c);for(var l=0;l<b.length;l+=1)b[l].m(t,c);o(t,h,c),g=!0},p(t,e){if(g&&!t.selected||_(a,e.selected),t.albums||t.selected_albums){p=e.albums;for(var n=0;n<p.length;n+=1){const a=dt(e,p,n);b[n]?(b[n].p(t,a),T(b[n],1)):(b[n]=bt(a),b[n].c(),T(b[n],1),b[n].m(h.parentNode,h))}for(L(),n=p.length;n<b.length;n+=1)v(n);M()}},i(t){if(!g){for(var e=0;e<p.length;e+=1)T(b[e]);g=!0}},o(t){b=b.filter(Boolean);for(let t=0;t<b.length;t+=1)B(b[t]);g=!1},d(t){t&&(c(e),c(r)),l(b,t),t&&c(h)}}}function pt(t){for(var e,n,a=t.album.songs,s=[],r=0;r<a.length;r+=1)s[r]=_t(ut(t,a,r));const i=t=>B(s[t],1,1,()=>{s[t]=null});return{c(){for(var t=0;t<s.length;t+=1)s[t].c();e=m()},m(t,a){for(var r=0;r<s.length;r+=1)s[r].m(t,a);o(t,e,a),n=!0},p(t,n){if(t.albums){a=n.album.songs;for(var r=0;r<a.length;r+=1){const i=ut(n,a,r);s[r]?(s[r].p(t,i),T(s[r],1)):(s[r]=_t(i),s[r].c(),T(s[r],1),s[r].m(e.parentNode,e))}for(L(),r=a.length;r<s.length;r+=1)i(r);M()}},i(t){if(!n){for(var e=0;e<a.length;e+=1)T(s[e]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)B(s[t]);n=!1},d(t){l(s,t),t&&c(e)}}}function _t(t){var e,n=new Q({props:{i:t.i,song:t.song,album:!0,qid:t.album.album_id+"-"+t.song.track_id}});return n.$on("select",t.select_handler),{c(){n.$$.fragment.c()},m(t,a){U(n,t,a),e=!0},p(t,e){var a={};t.albums&&(a.song=e.song),t.albums&&(a.qid=e.album.album_id+"-"+e.song.track_id),n.$set(a)},i(t){e||(T(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function bt(t){var e,n,s,r,l,m,g,b,q,v,$,k,y=t.album.album_name+"",x=t.album.songs.length>0&&pt(t);return{c(){e=u("label"),n=u("input"),l=f(),m=d(y),b=f(),q=u("div"),x&&x.c(),v=f(),t.$$binding_groups[0].push(n),p(n,"type","checkbox"),p(n,"id",s="a"+t.album.album_id),n.__value=r=t.album.album_id,n.value=n.__value,p(e,"for",g="a"+t.album.album_id),p(q,"class","songs svelte-z8xf4r"),k=[h(n,"change",t.input_change_handler_1),h(n,"change",t.albumChange)]},m(a,s){o(a,e,s),i(e,n),n.checked=~t.selected_albums.indexOf(n.__value),i(e,l),i(e,m),o(a,b,s),o(a,q,s),x&&x.m(q,null),i(q,v),$=!0},p(t,a){t.selected_albums&&(n.checked=~a.selected_albums.indexOf(n.__value)),$&&!t.albums||s===(s="a"+a.album.album_id)||p(n,"id",s),$&&!t.albums||r===(r=a.album.album_id)||(n.__value=r),n.value=n.__value,$&&!t.albums||y===(y=a.album.album_name+"")||_(m,y),$&&!t.albums||g===(g="a"+a.album.album_id)||p(e,"for",g),a.album.songs.length>0?x?(x.p(t,a),T(x,1)):((x=pt(a)).c(),T(x,1),x.m(q,v)):x&&(L(),B(x,1,1,()=>{x=null}),M())},i(t){$||(T(x),$=!0)},o(t){B(x),$=!1},d(s){s&&c(e),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(n),1),s&&(c(b),c(q)),x&&x.d(),a(k)}}}function qt(t){for(var e,n,a,s=t.artists,r=[],i=0;i<s.length;i+=1)r[i]=ht(ft(t,s,i));var u=t.selected>-1&&gt(t);return{c(){for(var t=0;t<r.length;t+=1)r[t].c();e=f(),u&&u.c(),n=m()},m(t,s){for(var i=0;i<r.length;i+=1)r[i].m(t,s);o(t,e,s),u&&u.m(t,s),o(t,n,s),a=!0},p(t,a){if(t.artists||t.flag||t.qid||t.selected){s=a.artists;for(var i=0;i<s.length;i+=1){const n=ft(a,s,i);r[i]?r[i].p(t,n):(r[i]=ht(n),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}a.selected>-1?u?(u.p(t,a),T(u,1)):((u=gt(a)).c(),T(u,1),u.m(n.parentNode,n)):u&&(L(),B(u,1,1,()=>{u=null}),M())},i(t){a||(T(u),a=!0)},o(t){B(u),a=!1},d(t){l(r,t),t&&c(e),u&&u.d(t),t&&c(n)}}}function vt(t){return t?t.toUpperCase().replace(/./g,t=>String.fromCodePoint(t.charCodeAt(0)+127397)):"🏳️"}function $t(t){return t.artist_alias}function kt(t,e,n){const a=k();let{artists:s,qid:r}=e,i=-1,o=-1,c=[],l=[];const u=[[],[]];return t.$set=(t=>{"artists"in t&&n("artists",s=t.artists),"qid"in t&&n("qid",r=t.qid)}),t.$$.update=((t={lastSelected:1,selected:1,albums:1})=>{(t.lastSelected||t.selected||t.albums)&&o!=i&&(n("lastSelected",o=i),n("albums",c=[]),ct({artist_id:i,page_size:10,s_release_date:"desc"}).then(function(t){t&&n("albums",c=[...c,...t.map(t=>({...t.album,songs:[]}))])}))}),{artists:s,qid:r,selected:i,albums:c,selected_albums:l,albumChange:function(t){t.target.checked&&c.forEach(e=>{if(e.album_id!=parseInt(t.target.value));else{if(e.songs.length>0)return;lt({album_id:e.album_id,page_size:100,f_has_lyrics:!0}).then(function(t){t&&(e.songs=[...e.songs,...t.map(t=>t.track)],n("albums",c),n("lastSelected",o),n("selected",i),t.map(t=>t.track).forEach(t=>{a("select",{track:t.track_id,query_index:e.album_id+"-"+t.track_id,title:t.track_name,artist:t.artist_name})}))})}})},select_handler:function(e){y(t,e)},input_change_handler:function(){i=this.__value,n("selected",i)},input_change_handler_1:function(){l=function(t){const e=[];for(let n=0;n<t.length;n+=1)t[n].checked&&e.push(t[n].__value);return e}(u[0]),n("selected_albums",l)},$$binding_groups:u}}class yt extends F{constructor(t){super(),V(this,t,kt,qt,r,["artists","qid"])}}const{Object:xt}=D;function wt(t,e,n){const a=xt.create(t);return a.q=e[n],a.qid=n,a}function Nt(t){var e,n=new yt({props:{artists:t.q.artists,qid:t.qid}});return n.$on("select",t.handleSelection),{c(){n.$$.fragment.c()},m(t,a){U(n,t,a),e=!0},p(t,e){var a={};t.queries&&(a.artists=e.q.artists),t.queries&&(a.qid=e.qid),n.$set(a)},i(t){e||(T(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function jt(t){var e,n=new nt({props:{q:t.q.q,qid:t.qid,songs:t.q.songs}});return n.$on("select",t.handleSelection),{c(){n.$$.fragment.c()},m(t,a){U(n,t,a),e=!0},p(t,e){var a={};t.queries&&(a.q=e.q.q),t.queries&&(a.qid=e.qid),t.queries&&(a.songs=e.q.songs),n.$set(a)},i(t){e||(T(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){R(n,t)}}}function Ct(t,e){var n,a,s,r,l,m,h,g=e.q.q+"",p=[jt,Nt],b=[];function q(t,e){return"song"==e.q.type?0:1}return l=q(0,e),m=b[l]=p[l](e),{key:t,first:null,c(){n=u("div"),a=u("h3"),s=d(g),r=f(),m.c(),this.first=n},m(t,e){o(t,n,e),i(n,a),i(a,s),i(n,r),b[l].m(n,null),h=!0},p(t,e){h&&!t.queries||g===(g=e.q.q+"")||_(s,g);var a=l;(l=q(0,e))===a?b[l].p(t,e):(L(),B(b[a],1,1,()=>{b[a]=null}),M(),(m=b[l])||(m=b[l]=p[l](e)).c(),T(m,1),m.m(n,null))},i(t){h||(T(m),h=!0)},o(t){B(m),h=!1},d(t){t&&c(n),b[l].d()}}}function Et(t){var e,n,a,s,r,l,f=1==t.count?"song":"songs";return{c(){e=u("button"),n=d("Export "),a=d(t.count),s=d(" selected "),r=d(f),l=h(e,"click",t.exportTrackList)},m(t,c){o(t,e,c),i(e,n),i(e,a),i(e,s),i(e,r)},p(t,e){t.count&&_(a,e.count),t.count&&f!==(f=1==e.count?"song":"songs")&&_(r,f)},d(t){t&&c(e),l()}}}function St(t){var e,n,s,r,l,_,q,v,$,k,y,x,w,N,j,C,E,S,O,A,z=[],I=new Map,D=t.queries;const U=t=>t.q;for(var R=0;R<D.length;R+=1){let e=wt(t,D,R),n=U(e);I.set(n,z[R]=Ct(n,e))}var Y=t.queries.length>0&&Et(t);return{c(){for((e=u("h1")).textContent="Export IDs",n=f(),s=u("form"),(r=u("h2")).textContent="Song Title",l=d("\n  You can enter more than one title on separate lines for bulk searches:\n  "),_=u("textarea"),q=f(),(v=u("button")).textContent="Suggest titles",$=f(),k=u("form"),(y=u("h2")).textContent="Artist",x=d("\n  You can enter more than one artist on separate lines for bulk searches:\n  "),w=u("textarea"),N=f(),(j=u("button")).textContent="Suggest artists",C=f(),R=0;R<z.length;R+=1)z[R].c();E=f(),Y&&Y.c(),S=m(),p(_,"class","svelte-13h320i"),p(v,"type","submit"),p(w,"class","svelte-13h320i"),p(j,"type","submit"),A=[h(_,"input",t.textarea0_input_handler),h(s,"submit",g(t.searchSongs)),h(w,"input",t.textarea1_input_handler),h(k,"submit",g(t.searchArtists))]},m(a,c){for(o(a,e,c),o(a,n,c),o(a,s,c),i(s,r),i(s,l),i(s,_),b(_,t.songNames),i(s,q),i(s,v),o(a,$,c),o(a,k,c),i(k,y),i(k,x),i(k,w),b(w,t.artistNames),i(k,N),i(k,j),o(a,C,c),R=0;R<z.length;R+=1)z[R].m(a,c);o(a,E,c),Y&&Y.m(a,c),o(a,S,c),O=!0},p(t,e){t.songNames&&b(_,e.songNames),t.artistNames&&b(w,e.artistNames);const n=e.queries;L(),z=function(t,e,n,a,s,r,i,o,c,l,u,d){let f=t.length,m=r.length,h=f;const g={};for(;h--;)g[t[h].key]=h;const p=[],_=new Map,b=new Map;for(h=m;h--;){const t=d(s,r,h),o=n(t);let c=i.get(o);c?a&&c.p(e,t):(c=l(o,t)).c(),_.set(o,p[h]=c),o in g&&b.set(o,Math.abs(h-g[o]))}const q=new Set,v=new Set;function $(t){T(t,1),t.m(o,u),i.set(t.key,t),u=t.first,m--}for(;f&&m;){const e=p[m-1],n=t[f-1],a=e.key,s=n.key;e===n?(u=e.first,f--,m--):_.has(s)?!i.has(a)||q.has(a)?$(e):v.has(s)?f--:b.get(a)>b.get(s)?(v.add(a),$(e)):(q.add(s),f--):(c(n,i),f--)}for(;f--;){const e=t[f];_.has(e.key)||c(e,i)}for(;m;)$(p[m-1]);return p}(z,t,U,1,e,n,I,E.parentNode,P,Ct,E,wt),M(),e.queries.length>0?Y?Y.p(t,e):((Y=Et(e)).c(),Y.m(S.parentNode,S)):Y&&(Y.d(1),Y=null)},i(t){if(!O){for(var e=0;e<D.length;e+=1)T(z[e]);O=!0}},o(t){for(R=0;R<z.length;R+=1)B(z[R]);O=!1},d(t){for(t&&(c(e),c(n),c(s),c($),c(k),c(C)),R=0;R<z.length;R+=1)z[R].d(t);t&&c(E),Y&&Y.d(t),t&&c(S),a(A)}}}function Ot(t,e,n){let a="",s="",r=[],i={},o=0;return{artistNames:a,songNames:s,queries:r,count:o,searchSongs:function(){s.trim().split("\n").forEach(t=>{it({q_track_artist:t.replace(/ *\([^)]*\) */g,""),page_size:5,page:1,s_track_rating:"desc"}).then(function(e){n("queries",r=[...r,{q:t,type:"song",songs:e.map(t=>t.track),selected:-1}])})}),n("songNames",s="")},searchArtists:function(){a.trim().split("\n").forEach(t=>{ot({q_artist:t.replace(/ *\([^)]*\) */g,""),page_size:5,page:1}).then(function(e){n("queries",r=[...r,{q:t,type:"artist",artists:e.map(t=>t.artist)}])})}),n("artistNames",a="")},handleSelection:function(t){-1==t.detail.track?delete i[t.detail.query_index]:i[t.detail.query_index]={id:t.detail.track,title:t.detail.title,artist:t.detail.artist},n("count",o=Object.keys(i).length)},exportTrackList:function(){let t="id\ttitle\tartist\t\n",e=[];for(let n in i)if(i.hasOwnProperty(n)){const a=i[n];t+=a.id+"\t",t+=a.title+"\t",t+=a.artist+"\n",e.push(a.id)}window.prompt("Track IDs for script:",e.join(",")),window.open("data:text/csv;charset=utf-8,"+encodeURIComponent(t),"_blank")},textarea0_input_handler:function(){s=this.value,n("songNames",s)},textarea1_input_handler:function(){a=this.value,n("artistNames",a)}}}return new class extends F{constructor(t){super(),V(this,t,Ot,St,r,[])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
