var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(t,e,n=e){return t.set(n),e}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function h(){return m("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function x(t,e){t.value=null==e?"":e}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function k(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function C(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function I(t,e,n){t.classList[n?"add":"remove"](e)}let _;function D(t){_=t}function j(t){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.on_destroy.push(t)}function S(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const U=[],M=[],E=[],N=[],O=Promise.resolve();let L=!1;function T(t){E.push(t)}function R(t){N.push(t)}let A=!1;const q=new Set;function z(){if(!A){A=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];D(e),F(e.$$)}for(D(null),U.length=0;M.length;)M.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];q.has(e)||(q.add(e),e())}E.length=0}while(U.length);for(;N.length;)N.pop()();L=!1,A=!1,q.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const H=new Set;let J;function P(){J={r:0,c:[],p:J}}function G(){J.r||o(J.c),J=J.p}function W(t,e){t&&t.i&&(H.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(H.has(t))return;H.add(t),J.c.push((()=>{H.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function B(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function V(t){t&&t.c()}function Z(t,n,l){const{fragment:r,on_mount:u,on_destroy:c,after_update:i}=t.$$;r&&r.m(n,l),T((()=>{const n=u.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(T)}function K(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(U.push(t),L||(L=!0,O.then(z)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,s,l,r,u,c,i=[-1]){const d=_;D(e);const f=s.props||{},m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let p=!1;if(m.ctx=l?l(e,f,((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&u(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&Q(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!r&&r(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();s.intro&&W(e.$$.fragment),Z(e,s.target,s.anchor),z()}D(d)}class tt{$destroy(){K(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et=[];function nt(e,n=t){let o;const s=[];function r(t){if(l(e,t)&&(e=t,o)){const t=!et.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),et.push(n,e)}if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,u=t){const c=[l,u];return s.push(c),1===s.length&&(o=n(r)||t),l(e),()=>{const t=s.indexOf(c);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}function ot(t,e){const n=localStorage.getItem(t);let o=e||null;n&&(o=JSON.parse(n));const s=nt(o);return s.subscribe((e=>localStorage.setItem(t,JSON.stringify(e)))),s}const st=ot("config"),lt=ot("homework"),rt=ot("student"),ut=ot("checkpoints",[]),ct=nt([]),it=nt({});let at=[];function dt(){const t=JSON.parse(localStorage.getItem("config")).studentIds.filter((t=>!at.includes(t)));if(t.length>0){const e=t[Math.floor(Math.random()*t.length)];rt.set({username:e,commentIds:[],submissionTime:""})}else rt.set(null)}function ft(e){let n,s,l,r,u,d,h,$,b,y,w,C,I,_,D,j,S,U,M,E,N,O,L,R,A;return{c(){n=f("label"),s=f("span"),s.textContent="Homework number",l=p(),r=f("input"),u=p(),d=f("label"),h=f("span"),h.textContent="Due date (EOD)",$=p(),b=f("input"),y=p(),w=f("div"),C=m("https://"),I=f("select"),_=f("option"),_.textContent="fall",D=f("option"),D.textContent="spring",j=m("-"),S=f("input"),U=m(".cs.utexas.edu/"),M=f("input"),E=p(),N=f("button"),O=m("Start grading"),v(r,"type","text"),v(r,"placeholder","1"),v(r,"class","short svelte-1re6vz0"),v(b,"type","date"),v(b,"class","date"),_.__value="fall",_.value=_.__value,D.__value="spring",D.value=D.__value,void 0===e[0]&&T((()=>e[8].call(I))),v(S,"type","text"),v(S,"class","short svelte-1re6vz0"),v(M,"type","text"),v(w,"class","prefix svelte-1re6vz0"),N.disabled=L=!e[3]||!e[4]||!e[2]},m(t,o){i(t,n,o),c(n,s),c(n,l),c(n,r),x(r,e[3]),i(t,u,o),i(t,d,o),c(d,h),c(d,$),c(d,b),x(b,e[4]),i(t,y,o),i(t,w,o),c(w,C),c(w,I),c(I,_),c(I,D),k(I,e[0]),c(w,j),c(w,S),x(S,e[1]),c(w,U),c(w,M),x(M,e[2]),i(t,E,o),i(t,N,o),c(N,O),R||(A=[g(r,"input",e[6]),g(b,"input",e[7]),g(I,"change",e[8]),g(S,"input",e[9]),g(M,"input",e[10]),g(N,"click",e[5])],R=!0)},p(t,[e]){8&e&&r.value!==t[3]&&x(r,t[3]),16&e&&x(b,t[4]),1&e&&k(I,t[0]),2&e&&S.value!==t[1]&&x(S,t[1]),4&e&&M.value!==t[2]&&x(M,t[2]),28&e&&L!==(L=!t[3]||!t[4]||!t[2])&&(N.disabled=L)},i:t,o:t,d(t){t&&a(n),t&&a(u),t&&a(d),t&&a(y),t&&a(w),t&&a(E),t&&a(N),R=!1,o(A)}}}function mt(t,e,n){let o,s;r(t,lt,(t=>n(12,s=t)));let l="",c="";const i=new Date;let a=i.getMonth()<6?"spring":"fall",d=i.getFullYear(),f="cs329e-bulko";return t.$$.update=()=>{7&t.$$.dirty&&(o=`https://${a}-${d}.cs.utexas.edu/${f}`)},[a,d,f,l,c,function(){u(lt,s={number:parseInt(l),dueDate:c,students:[],possibleComments:[{text:"One day late",points:10},{text:"Two days late",points:20},{text:"No submission",points:100}],prefix:o},s),dt()},function(){l=this.value,n(3,l)},function(){c=this.value,n(4,c)},function(){a=C(this),n(0,a)},function(){d=this.value,n(1,d)},function(){f=this.value,n(2,f)}]}lt.subscribe((t=>at=t&&t.students.map((t=>t.username))));class pt extends tt{constructor(t){super(),X(this,t,mt,ft,l,{})}}var ht=["second","minute","hour","day","week","month","year"];var gt=["秒","分钟","小时","天","周","个月","年"];var $t={},vt=function(t,e){$t[t]=e},bt=[60,60,24,7,365/7/12,12];function yt(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}var xt=function(t,e,n){return function(t,e){for(var n=t<0?1:0,o=t=Math.abs(t),s=0;t>=bt[s]&&s<bt.length;s++)t/=bt[s];return(t=Math.floor(t))>(0==(s*=2)?9:1)&&(s+=1),e(t,s,o)[n].replace("%s",t.toString())}(function(t,e){return(+(e?yt(e):new Date)-+yt(t))/1e3}(t,n&&n.relativeDate),function(t){return $t[t]||$t.en_US}(e))};function wt(t){return xt(new Date(t))}function kt(t,e){let n=100;for(const o of t)n-=e[o].points;return n}function Ct(t){document.body.dataset.tellExtension=JSON.stringify(t)}function It(t){return t.split("/")[5]}function _t(t,e,n){const o=t.slice();return o[7]=e[n],o[9]=n,o}function Dt(t){let e,n,o,s,l,r=t[7].label+"",u=wt(t[7].lastChange)+"";return{c(){e=f("option"),n=m(r),o=m(", saved "),s=m(u),l=p(),e.__value=t[9],e.value=e.__value},m(t,r){i(t,e,r),c(e,n),c(e,o),c(e,s),c(e,l)},p(t,e){2&e&&r!==(r=t[7].label+"")&&y(n,r),2&e&&u!==(u=wt(t[7].lastChange)+"")&&y(s,u)},d(t){t&&a(e)}}}function jt(e){let n,s,l,r,u,c=e[1],m=[];for(let t=0;t<c.length;t+=1)m[t]=Dt(_t(e,c,t));return{c(){n=f("select");for(let t=0;t<m.length;t+=1)m[t].c();s=p(),l=f("button"),l.textContent="Restore from save",void 0===e[0]&&T((()=>e[4].call(n)))},m(t,o){i(t,n,o);for(let t=0;t<m.length;t+=1)m[t].m(n,null);k(n,e[0]),i(t,s,o),i(t,l,o),r||(u=[g(n,"change",e[4]),g(l,"click",e[2])],r=!0)},p(t,[e]){if(2&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const s=_t(t,c,o);m[o]?m[o].p(s,e):(m[o]=Dt(s),m[o].c(),m[o].m(n,null))}for(;o<m.length;o+=1)m[o].d(1);m.length=c.length}1&e&&k(n,t[0])},i:t,o:t,d(t){t&&a(n),d(m,t),t&&a(s),t&&a(l),r=!1,o(u)}}}function St(t,e,n){let o,s,l,c;r(t,ut,(t=>n(3,s=t))),r(t,lt,(t=>n(5,l=t))),r(t,rt,(t=>n(6,c=t)));let i=0;return t.$$.update=()=>{8&t.$$.dirty&&n(1,o=(null==s?void 0:s.sort(((t,e)=>e.lastChange-t.lastChange)))||[])},[i,o,function(){const t=s[i];u(lt,l=t.homework,l),u(rt,c=t.currentStudent,c),s.splice(i,1),ut.set(s)},s,function(){i=C(this),n(0,i)}]}vt("en_US",(function(t,e){if(0===e)return["just now","right now"];var n=ht[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]})),vt("zh_CN",(function(t,e){if(0===e)return["刚刚","片刻后"];var n=gt[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}));class Ut extends tt{constructor(t){super(),X(this,t,St,jt,l,{})}}function Mt(t){let e,n,o,s;return o=new Ut({}),{c(){e=f("h1"),e.textContent="Load previous session",n=p(),V(o.$$.fragment),v(e,"class","svelte-1twctnr")},m(t,l){i(t,e,l),i(t,n,l),Z(o,t,l),s=!0},i(t){s||(W(o.$$.fragment,t),s=!0)},o(t){Y(o.$$.fragment,t),s=!1},d(t){t&&a(e),t&&a(n),K(o,t)}}}function Et(t){let e,n,s,l,r,u,d,h,$,b,w,k,C,I,_,D,j,S,U,M,E,N,O,L=t[2].studentIds.length+"",T=1===t[2].studentIds.length?"student":"students",R=t[2].endpoint+"";s=new pt({});let A=null!==t[1]&&t[1].length>0&&Mt();return{c(){e=f("h1"),e.textContent="Grade new homework",n=p(),V(s.$$.fragment),l=p(),A&&A.c(),r=p(),u=f("h1"),u.textContent="Configuration",d=p(),h=f("label"),$=f("span"),b=m(L),w=p(),k=m(T),C=p(),I=f("textarea"),_=p(),D=f("div"),j=m("UT CS server endpoint: "),S=m(R),U=m("\n\nIf you messed up or want to reset, use this:\n"),M=f("button"),M.textContent="Delete everything and set up again",v(e,"class","svelte-1twctnr"),v(u,"class","svelte-1twctnr"),v(I,"class","svelte-1twctnr")},m(o,a){i(o,e,a),i(o,n,a),Z(s,o,a),i(o,l,a),A&&A.m(o,a),i(o,r,a),i(o,u,a),i(o,d,a),i(o,h,a),c(h,$),c($,b),c($,w),c($,k),c(h,C),c(h,I),x(I,t[0]),i(o,_,a),i(o,D,a),c(D,j),c(D,S),i(o,U,a),i(o,M,a),E=!0,N||(O=[g(I,"input",t[4]),g(M,"click",t[3])],N=!0)},p(t,[e]){null!==t[1]&&t[1].length>0?A?2&e&&W(A,1):(A=Mt(),A.c(),W(A,1),A.m(r.parentNode,r)):A&&(P(),Y(A,1,1,(()=>{A=null})),G()),(!E||4&e)&&L!==(L=t[2].studentIds.length+"")&&y(b,L),(!E||4&e)&&T!==(T=1===t[2].studentIds.length?"student":"students")&&y(k,T),1&e&&x(I,t[0]),(!E||4&e)&&R!==(R=t[2].endpoint+"")&&y(S,R)},i(t){E||(W(s.$$.fragment,t),W(A),E=!0)},o(t){Y(s.$$.fragment,t),Y(A),E=!1},d(t){t&&a(e),t&&a(n),K(s,t),t&&a(l),A&&A.d(t),t&&a(r),t&&a(u),t&&a(d),t&&a(h),t&&a(_),t&&a(D),t&&a(U),t&&a(M),N=!1,o(O)}}}function Nt(t,e,n){let o,s;r(t,ut,(t=>n(1,o=t))),r(t,st,(t=>n(2,s=t)));let l=s.studentIds.join("\n");return t.$$.update=()=>{1&t.$$.dirty&&u(st,s.studentIds=l.split("\n").filter((t=>!!t)),s)},[l,o,s,function(){confirm(`You are about to DELETE EVERYTHING, including your authentication token and ${o.length} checkpoints. Are you sure?`)&&(localStorage.clear(),window.location=window.location)},function(){l=this.value,n(0,l)}]}class Ot extends tt{constructor(t){super(),X(this,t,Nt,Et,l,{})}}function Lt(t){let e,n,s,l,r,u,d,h,$,b,y,w,k,C,I,_,D,j,S,U,M,E,N,O,L;return{c(){e=f("ul"),n=f("li"),s=m("What is your UT CS username?\n\t\t\t"),l=f("input"),r=p(),u=f("li"),d=m("Log in to your UT CS account and run "),h=f("code"),h.textContent=`cd ~/public_html; wget ${document.location.href}server/${At}; chmod +x ${At}`,$=p(),b=f("li"),y=m("Go to "),w=f("a"),k=m("this link"),C=m(", copy the\n\t\t\ttoken, and paste it here:\n\t\t\t"),I=f("input"),_=p(),D=f("li"),j=m("Paste your list of student IDs separated by linebreaks here:\n\t\t\t"),S=f("textarea"),U=p(),M=f("button"),E=m("I finished all steps"),v(l,"type","text"),v(w,"href",t[4]),v(w,"target","_blank"),v(I,"type","text"),M.disabled=N=!t[2]||!t[1]||!t[3]},m(o,a){i(o,e,a),c(e,n),c(n,s),c(n,l),x(l,t[2]),c(e,r),c(e,u),c(u,d),c(u,h),c(e,$),c(e,b),c(b,y),c(b,w),c(w,k),c(b,C),c(b,I),x(I,t[1]),c(e,_),c(e,D),c(D,j),c(D,S),x(S,t[3]),i(o,U,a),i(o,M,a),c(M,E),O||(L=[g(l,"input",t[6]),g(I,"input",t[7]),g(S,"input",t[8]),g(M,"click",t[5])],O=!0)},p(t,e){4&e&&l.value!==t[2]&&x(l,t[2]),16&e&&v(w,"href",t[4]),2&e&&I.value!==t[1]&&x(I,t[1]),8&e&&x(S,t[3]),14&e&&N!==(N=!t[2]||!t[1]||!t[3])&&(M.disabled=N)},d(t){t&&a(e),t&&a(U),t&&a(M),O=!1,o(L)}}}function Tt(e){let n,o,s,l,r,u,c;return{c(){n=m("Install the companion browser extension for\n\t"),o=f("a"),o.textContent="Firefox",s=m("\n\tor\n\t"),l=f("a"),l.textContent="Chrome",r=m("\n\tand\n\t\n\t"),u=f("a"),u.textContent="refresh",c=m("."),v(o,"href","https://addons.mozilla.org/en-US/firefox/addon/gradable-companion/"),v(l,"href","https://chrome.google.com/webstore/detail/njijmdbjijgeodnhcnkknkeopbhfgpbg"),v(u,"href","")},m(t,e){i(t,n,e),i(t,o,e),i(t,s,e),i(t,l,e),i(t,r,e),i(t,u,e),i(t,c,e)},p:t,d(t){t&&a(n),t&&a(o),t&&a(s),t&&a(l),t&&a(r),t&&a(u),t&&a(c)}}}function Rt(e){let n,o,s;function l(t,e){return t[0]?Lt:Tt}let r=l(e),u=r(e);return{c(){n=f("h1"),n.textContent="Needs setup before running",o=p(),u.c(),s=h()},m(t,e){i(t,n,e),i(t,o,e),u.m(t,e),i(t,s,e)},p(t,[e]){r===(r=l(t))&&u?u.p(t,e):(u.d(1),u=r(t),u&&(u.c(),u.m(s.parentNode,s)))},i:t,o:t,d(t){t&&a(n),t&&a(o),u.d(t),t&&a(s)}}}const At="gradable.php";function qt(t,e,n){let o,s,l;r(t,st,(t=>n(10,l=t)));let{pluginInstalled:c=!1}=e,i="",a="",d="";return t.$$set=t=>{"pluginInstalled"in t&&n(0,c=t.pluginInstalled)},t.$$.update=()=>{4&t.$$.dirty&&n(4,o=`https://www.cs.utexas.edu/~${a}/${At}`),26&t.$$.dirty&&(s={token:i,endpoint:o,studentIds:d.split("\n")})},[c,i,a,d,o,function(){(function(t){const e=new URLSearchParams;return e.append("token",t.token),e.append("ping","yes"),fetch(t.endpoint,{method:"post",body:e}).then((t=>t.json()))})(s).then((t=>{if(!t.success)throw new Error("Failed connection");u(st,l=s,l)})).catch((()=>{alert("Could not connect to server")}))},function(){a=this.value,n(2,a)},function(){i=this.value,n(1,i)},function(){d=this.value,n(3,d)}]}class zt extends tt{constructor(t){super(),X(this,t,qt,Rt,l,{pluginInstalled:0})}}function Ft(t,e,n){const o=t.slice();return o[10]=e[n],o[12]=n,o}function Ht(e){let n;return{c(){n=f("i"),n.textContent="none"},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function Jt(t){let e,n,s,l;return{c(){e=f("textarea"),e.readOnly=!0,e.value=n=t[4](t[10].commentIds,"\n"),v(e,"class","svelte-gmr12x")},m(t,n){i(t,e,n),s||(l=[g(e,"click",Wt),g(e,"focus",Wt)],s=!0)},p(t,o){2&o&&n!==(n=t[4](t[10].commentIds,"\n"))&&(e.value=n)},d(t){t&&a(e),s=!1,o(l)}}}function Pt(t){let e,n,s,l,r,u,d,h,$,b,x,w,k,C,I,_,D=t[10].username+"";function j(t,e){return t[10].commentIds.length>0?Jt:Ht}let S=j(t),U=S(t);function M(){return t[6](t[12])}return{c(){e=f("tr"),n=f("td"),s=m(D),l=p(),r=f("td"),u=f("input"),h=m("%"),$=p(),b=f("td"),U.c(),x=p(),w=f("td"),k=f("button"),k.textContent="regrade",C=p(),u.readOnly=!0,v(u,"class","percentage svelte-gmr12x"),v(u,"type","text"),u.value=d=kt(t[10].commentIds,t[0].possibleComments)},m(t,o){i(t,e,o),c(e,n),c(n,s),c(e,l),c(e,r),c(r,u),c(r,h),c(e,$),c(e,b),U.m(b,null),c(e,x),c(e,w),c(w,k),c(e,C),I||(_=[g(u,"click",Wt),g(u,"focus",Wt),g(k,"click",M)],I=!0)},p(e,n){t=e,2&n&&D!==(D=t[10].username+"")&&y(s,D),3&n&&d!==(d=kt(t[10].commentIds,t[0].possibleComments))&&u.value!==d&&(u.value=d),S===(S=j(t))&&U?U.p(t,n):(U.d(1),U=S(t),U&&(U.c(),U.m(b,null)))},d(t){t&&a(e),U.d(),I=!1,o(_)}}}function Gt(e){let n,o,s,l,r,u,m,h,$=e[1],b=[];for(let t=0;t<$.length;t+=1)b[t]=Pt(Ft(e,$,t));return{c(){n=f("table"),o=f("thead"),o.innerHTML='<tr><td>id</td> \n\t\t\t<td>grade</td> \n\t\t\t<td width="99%">comments</td> \n\t\t\t<td>actions</td></tr>',s=p(),l=f("tbody");for(let t=0;t<b.length;t+=1)b[t].c();r=p(),u=f("button"),u.textContent="Export and continue",v(n,"class","svelte-gmr12x")},m(t,a){i(t,n,a),c(n,o),c(n,s),c(n,l);for(let t=0;t<b.length;t+=1)b[t].m(l,null);i(t,r,a),i(t,u,a),m||(h=g(u,"click",e[2]),m=!0)},p(t,[e]){if(27&e){let n;for($=t[1],n=0;n<$.length;n+=1){const o=Ft(t,$,n);b[n]?b[n].p(o,e):(b[n]=Pt(o),b[n].c(),b[n].m(l,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=$.length}},i:t,o:t,d(t){t&&a(n),d(b,t),t&&a(r),t&&a(u),m=!1,h()}}}function Wt(t){t.target.select()}function Yt(t,e,n){let o,s,l,c,i;function a(t){u(rt,i=s.students[t],i),s.students.splice(t,1),lt.set(s)}function d(t,e){return t.map((t=>s.possibleComments[t])).map((({points:t,text:e})=>`-${t}: ${e}`)).join(e)}r(t,lt,(t=>n(0,s=t))),r(t,st,(t=>n(5,l=t))),r(t,ut,(t=>n(7,c=t))),r(t,rt,(t=>n(8,i=t)));return t.$$.update=()=>{33&t.$$.dirty&&n(1,o=s?l.studentIds.map((t=>(null==s?void 0:s.students.find((e=>e.username===t)))||{})):[])},[s,o,function(){u(ut,c=[...c,{label:"HW "+s.number,lastChange:(new Date).getTime(),homework:s,currentStudent:null}],c);let t="name\tscore\tcomments\n";o.forEach((e=>{t+=e.username,t+="\t",t+=kt(e.commentIds,null==s?void 0:s.possibleComments),t+="\t",t+=d(e.commentIds,"; "),t+="\n"}));const e=document.createElement("a");e.setAttribute("href","data:text/tab-separated-values;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",`HW${s.number}export-${(new Date).getTime()/1e3|0}.csv`),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),u(lt,s=null,s)},a,d,l,t=>{a(t)}]}class Bt extends tt{constructor(t){super(),X(this,t,Yt,Gt,l,{})}}function Vt(e){let n,s,l,r,u,d,h,$,b,x,w,k,C,I;return{c(){n=f("div"),s=f("div"),l=f("div"),r=m(e[2]),u=f("span"),u.textContent="ignore",d=p(),h=f("button"),h.textContent="Clear cookies",$=p(),b=f("button"),b.textContent="Refresh",x=p(),w=f("iframe"),v(u,"class","svelte-1lvyd28"),v(l,"class","location svelte-1lvyd28"),v(h,"class","svelte-1lvyd28"),v(b,"class","svelte-1lvyd28"),v(s,"class","top svelte-1lvyd28"),w.src!==(k=e[1])&&v(w,"src",k),v(w,"frameborder","0"),v(w,"title","Embedded website to grade"),v(w,"class","svelte-1lvyd28"),v(n,"class","browser svelte-1lvyd28")},m(t,o){i(t,n,o),c(n,s),c(s,l),c(l,r),c(l,u),c(s,d),c(s,h),c(s,$),c(s,b),c(n,x),c(n,w),e[5](w),C||(I=[g(h,"click",e[4]),g(b,"click",e[3])],C=!0)},p(t,[e]){4&e&&y(r,t[2]),2&e&&w.src!==(k=t[1])&&v(w,"src",k)},i:t,o:t,d(t){t&&a(n),e[5](null),C=!1,o(I)}}}function Zt(t,e,n){let{embeddedUrl:o="about:blank"}=e,{displayUrl:s="about:blank"}=e,{iframeRef:l}=e;return t.$$set=t=>{"embeddedUrl"in t&&n(1,o=t.embeddedUrl),"displayUrl"in t&&n(2,s=t.displayUrl),"iframeRef"in t&&n(0,l=t.iframeRef)},[l,o,s,function(){Ct({type:"refresh-page"})},function(){Ct({type:"clear-cookies",value:s})},function(t){M[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class Kt extends tt{constructor(t){super(),X(this,t,Zt,Vt,l,{embeddedUrl:1,displayUrl:2,iframeRef:0})}}function Qt(e){let n,s,l,r,u,d;return{c(){n=f("div"),s=f("div"),s.textContent="-",l=p(),r=f("input"),v(s,"class","minus svelte-mu2102"),v(r,"type","number"),v(r,"class","points svelte-mu2102"),v(r,"placeholder","5"),v(n,"class","join svelte-mu2102")},m(t,o){i(t,n,o),c(n,s),c(n,l),c(n,r),x(r,e[0]),u||(d=[g(r,"input",e[4]),g(r,"keyup",$(e[1])),g(r,"blur",e[2]),g(r,"change",e[3])],u=!0)},p(t,[e]){1&e&&b(r.value)!==t[0]&&x(r,t[0])},i:t,o:t,d(t){t&&a(n),u=!1,o(d)}}}function Xt(t,e,n){let{value:o}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value)},[o,function(e){S(t,e)},function(e){S(t,e)},function(e){S(t,e)},function(){o=b(this.value),n(0,o)}]}class te extends tt{constructor(t){super(),X(this,t,Xt,Qt,l,{value:0})}}function ee(t){let e,n,s,l,r,u,d,m,h,$,b,y,w;function k(e){t[7].call(null,e)}let C={};return void 0!==t[0].points&&(C.value=t[0].points),u=new te({props:C}),M.push((()=>B(u,"value",k))),u.$on("change",t[4]),{c(){e=f("tr"),n=f("td"),s=f("input"),l=p(),r=f("td"),V(u.$$.fragment),m=p(),h=f("td"),$=f("input"),v(s,"type","text"),v(s,"placeholder","Missing name"),v(s,"class","svelte-1te1hhk"),v(n,"class","comment svelte-1te1hhk"),v($,"type","checkbox"),$.checked=t[2],v($,"class","svelte-1te1hhk"),v(h,"class","toggle svelte-1te1hhk"),v(e,"class","svelte-1te1hhk"),I(e,"inactive",!t[2])},m(o,a){i(o,e,a),c(e,n),c(n,s),x(s,t[0].text),c(e,l),c(e,r),Z(u,r,null),c(e,m),c(e,h),c(h,$),b=!0,y||(w=[g(s,"input",t[6]),g(s,"change",t[4]),g($,"change",t[8]),g(h,"click",t[9])],y=!0)},p(t,[n]){1&n&&s.value!==t[0].text&&x(s,t[0].text);const o={};!d&&1&n&&(d=!0,o.value=t[0].points,R((()=>d=!1))),u.$set(o),(!b||4&n)&&($.checked=t[2]),4&n&&I(e,"inactive",!t[2])},i(t){b||(W(u.$$.fragment,t),b=!0)},o(t){Y(u.$$.fragment,t),b=!1},d(t){t&&a(e),K(u),y=!1,o(w)}}}function ne(t,e,n){let o,s,l;r(t,rt,(t=>n(5,s=t))),r(t,lt,(t=>n(10,l=t)));let{comment:c}=e,{commentId:i}=e;function a(t,e){t?s.commentIds.includes(e)||u(rt,s.commentIds=[...s.commentIds,e],s):u(rt,s.commentIds=s.commentIds.filter((t=>t!==e)),s)}return t.$$set=t=>{"comment"in t&&n(0,c=t.comment),"commentId"in t&&n(1,i=t.commentId)},t.$$.update=()=>{34&t.$$.dirty&&n(2,o=s.commentIds.includes(i))},[c,i,o,a,function(){u(lt,l.possibleComments[i]=c,l)},s,function(){c.text=this.value,n(0,c)},function(t){c.points=t,n(0,c)},t=>a(t.target.checked,i),()=>a(!o,i)]}class oe extends tt{constructor(t){super(),X(this,t,ne,ee,l,{comment:0,commentId:1})}}function se(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function le(t){let e,n;return e=new oe({props:{comment:t[8],commentId:t[10]}}),{c(){V(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.comment=t[8]),e.$set(o)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function re(t){let e,n,s,l,r,u,m,h,b,y,w,k,C,I,_,D,j=t[2].possibleComments,S=[];for(let e=0;e<j.length;e+=1)S[e]=le(se(t,j,e));const U=t=>Y(S[t],1,1,(()=>{S[t]=null}));function E(e){t[6].call(null,e)}let N={};return void 0!==t[0]&&(N.value=t[0]),h=new te({props:N}),M.push((()=>B(h,"value",E))),h.$on("keyup",t[3]),h.$on("blur",t[4]),{c(){e=f("table");for(let t=0;t<S.length;t+=1)S[t].c();n=p(),s=f("tr"),l=f("td"),r=f("input"),u=p(),m=f("td"),V(h.$$.fragment),y=p(),w=f("td"),k=p(),C=f("small"),C.textContent="Use the checkboxes to the right to mark off points. To add a new penalty,\n\tenter a comment and the number of points to remove. Changing text or points\n\twill update for all students.",v(r,"type","text"),v(r,"placeholder","Missing name"),v(r,"class","svelte-1at0h8t"),v(l,"class","comment svelte-1at0h8t"),v(e,"class","svelte-1at0h8t"),v(C,"class","svelte-1at0h8t")},m(o,a){i(o,e,a);for(let t=0;t<S.length;t+=1)S[t].m(e,null);c(e,n),c(e,s),c(s,l),c(l,r),x(r,t[1]),c(s,u),c(s,m),Z(h,m,null),c(s,y),c(s,w),i(o,k,a),i(o,C,a),I=!0,_||(D=[g(r,"input",t[5]),g(r,"keyup",$(t[3])),g(r,"blur",t[4])],_=!0)},p(t,[o]){if(4&o){let s;for(j=t[2].possibleComments,s=0;s<j.length;s+=1){const l=se(t,j,s);S[s]?(S[s].p(l,o),W(S[s],1)):(S[s]=le(l),S[s].c(),W(S[s],1),S[s].m(e,n))}for(P(),s=j.length;s<S.length;s+=1)U(s);G()}2&o&&r.value!==t[1]&&x(r,t[1]);const s={};!b&&1&o&&(b=!0,s.value=t[0],R((()=>b=!1))),h.$set(s)},i(t){if(!I){for(let t=0;t<j.length;t+=1)W(S[t]);W(h.$$.fragment,t),I=!0}},o(t){S=S.filter(Boolean);for(let t=0;t<S.length;t+=1)Y(S[t]);Y(h.$$.fragment,t),I=!1},d(t){t&&a(e),d(S,t),K(h),t&&a(k),t&&a(C),_=!1,o(D)}}}function ue(t,e,n){let o,s;r(t,lt,(t=>n(2,o=t))),r(t,rt,(t=>n(7,s=t)));let l="",c="";function i(){if(l&&c){let t=o.possibleComments.map((t=>t.text)).indexOf(c);-1===t?(t=o.possibleComments.length,u(lt,o.possibleComments=[...o.possibleComments,{text:c,points:parseInt(l,10)}],o)):u(lt,o.possibleComments[t].points=parseInt(l,10),o),s.commentIds.includes(t)||u(rt,s.commentIds=[...s.commentIds,t],s),n(0,l=n(1,c=""))}}return[l,c,o,function(t){"Enter"==t.code&&i()},i,function(){c=this.value,n(1,c)},function(t){l=t,n(0,l)}]}class ce extends tt{constructor(t){super(),X(this,t,ue,re,l,{})}}function ie(t,e,n){const o=t.slice();return o[8]=e[n],o}function ae(e){let n;return{c(){n=f("td"),n.innerHTML="<i>unknown</i>"},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function de(t){let e,n,o,s=new Date(t[8].lastModified).toLocaleString()+"",l=t[8].daysLate>0&&fe(t);return{c(){e=f("td"),l&&l.c(),n=p(),o=m(s)},m(t,s){i(t,e,s),l&&l.m(e,null),c(e,n),c(e,o)},p(t,r){t[8].daysLate>0?l?l.p(t,r):(l=fe(t),l.c(),l.m(e,n)):l&&(l.d(1),l=null),2&r&&s!==(s=new Date(t[8].lastModified).toLocaleString()+"")&&y(o,s)},d(t){t&&a(e),l&&l.d()}}}function fe(t){let e,n,o=t[8].daysLate+"";return{c(){e=f("div"),n=m(o),v(e,"class","latebadge svelte-18rxo1u")},m(t,o){i(t,e,o),c(e,n)},p(t,e){2&e&&o!==(o=t[8].daysLate+"")&&y(n,o)},d(t){t&&a(e)}}}function me(t){let e,n,o,s,l,r,u,d,h,g,$,b=t[8].statusCode+"",x=t[8].displayUrl+"";function w(t,e){return t[8].lastModified?de:ae}let k=w(t),C=k(t);return{c(){e=f("tr"),n=f("td"),o=m(b),s=p(),l=f("td"),r=f("a"),u=m(x),g=p(),C.c(),$=p(),v(r,"href",d=t[8].url),v(r,"target","_blank"),v(l,"title",h=t[8].url)},m(t,a){i(t,e,a),c(e,n),c(n,o),c(e,s),c(e,l),c(l,r),c(r,u),c(e,g),C.m(e,null),c(e,$)},p(t,n){2&n&&b!==(b=t[8].statusCode+"")&&y(o,b),2&n&&x!==(x=t[8].displayUrl+"")&&y(u,x),2&n&&d!==(d=t[8].url)&&v(r,"href",d),2&n&&h!==(h=t[8].url)&&v(l,"title",h),k===(k=w(t))&&C?C.p(t,n):(C.d(1),C=k(t),C&&(C.c(),C.m(e,$)))},d(t){t&&a(e),C.d()}}}function pe(e){let n,o,s,l,r,u,h,b,x,w,k,C,_,D,j=1===e[0]?"day":"days",S=e[1],U=[];for(let t=0;t<S.length;t+=1)U[t]=me(ie(e,S,t));return{c(){n=f("div"),o=f("div"),s=m("Most recent change made "),l=m(e[0]),r=p(),u=m(j),h=m(" late."),b=p(),x=f("a"),x.textContent="Clear",w=p(),k=f("div"),C=f("table");for(let t=0;t<U.length;t+=1)U[t].c();v(o,"class","svelte-18rxo1u"),v(x,"href","#clear"),v(x,"class","svelte-18rxo1u"),v(n,"class","summary svelte-18rxo1u"),I(n,"late",e[0]>0),v(C,"class","svelte-18rxo1u"),v(k,"class","wrap svelte-18rxo1u")},m(t,a){i(t,n,a),c(n,o),c(o,s),c(o,l),c(o,r),c(o,u),c(o,h),c(n,b),c(n,x),i(t,w,a),i(t,k,a),c(k,C);for(let t=0;t<U.length;t+=1)U[t].m(C,null);_||(D=g(x,"click",$(e[2])),_=!0)},p(t,[e]){if(1&e&&y(l,t[0]),1&e&&j!==(j=1===t[0]?"day":"days")&&y(u,j),1&e&&I(n,"late",t[0]>0),2&e){let n;for(S=t[1],n=0;n<S.length;n+=1){const o=ie(t,S,n);U[n]?U[n].p(o,e):(U[n]=me(o),U[n].c(),U[n].m(C,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=S.length}},i:t,o:t,d(t){t&&a(n),t&&a(w),t&&a(k),d(U,t),_=!1,D()}}}function he(t,e){const n=(e-new Date(t).getTime())/1e3,o=-Math.floor(Math.min(0,n/60/60/24));return o>0?o:0}function ge(t,e,n){let o,s,l,c,i,a;r(t,lt,(t=>n(4,l=t))),r(t,ct,(t=>n(5,c=t))),r(t,it,(t=>n(6,i=t))),r(t,rt,(t=>n(7,a=t)));let d=0;return t.$$.update=()=>{if(16&t.$$.dirty&&n(3,o=new Date(l.dueDate+" 23:59:59").getTime()),232&t.$$.dirty&&n(1,s=c.map((t=>{return Object.assign(Object.assign({},t),{lastModified:(e=i,n=t.url,e[n=n.split("?")[0]]||e[n+"index.html"]||e[n+"index.htm"]||e[n+"index.php"]),displayUrl:t.url.split(a.username)[1]||t.url});var e,n})).map((t=>Object.assign(Object.assign({},t),{daysLate:he(t.lastModified,o)})))),11&t.$$.dirty){const t=s.filter((t=>!!t.lastModified)).map((t=>he(t.lastModified,o)));n(0,d=Math.max(...t)),n(0,d=isFinite(d)?d:0)}},[d,s,function(){u(ct,c=[],c)},o,l,c,i,a]}class $e extends tt{constructor(t){super(),X(this,t,ge,pe,l,{})}}function ve(t,e,n){const o=t.slice();return o[7]=e[n],o}function be(t){let e,n,o,s=kt(we(t[7],t[1]).commentIds,t[1].possibleComments)+"";return{c(){e=m("("),n=m(s),o=m("%)")},m(t,s){i(t,e,s),i(t,n,s),i(t,o,s)},p(t,e){2&e&&s!==(s=kt(we(t[7],t[1]).commentIds,t[1].possibleComments)+"")&&y(n,s)},d(t){t&&a(e),t&&a(n),t&&a(o)}}}function ye(t){let e,n,o,s,l=t[7]+"",r=we(t[7],t[1]),u=r&&be(t);return{c(){e=f("option"),n=m(l),o=p(),u&&u.c(),s=p(),e.__value=t[7],e.value=e.__value},m(t,l){i(t,e,l),c(e,n),c(e,o),u&&u.m(e,null),c(e,s)},p(t,n){2&n&&(r=we(t[7],t[1])),r?u?u.p(t,n):(u=be(t),u.c(),u.m(e,s)):u&&(u.d(1),u=null)},d(t){t&&a(e),u&&u.d()}}}function xe(e){let n,s,l,r,u,m,h=e[2],$=[];for(let t=0;t<h.length;t+=1)$[t]=ye(ve(e,h,t));return{c(){n=f("div"),s=f("select");for(let t=0;t<$.length;t+=1)$[t].c();l=p(),r=f("button"),r.textContent="Discard current and jump",v(s,"class","svelte-2269uq"),void 0===e[0]&&T((()=>e[4].call(s))),v(n,"class","svelte-2269uq")},m(t,o){i(t,n,o),c(n,s);for(let t=0;t<$.length;t+=1)$[t].m(s,null);k(s,e[0]),c(n,l),c(n,r),u||(m=[g(s,"change",e[4]),g(r,"click",e[3])],u=!0)},p(t,[e]){if(6&e){let n;for(h=t[2],n=0;n<h.length;n+=1){const o=ve(t,h,n);$[n]?$[n].p(o,e):($[n]=ye(o),$[n].c(),$[n].m(s,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=h.length}5&e&&k(s,t[0])},i:t,o:t,d(t){t&&a(n),d($,t),u=!1,o(m)}}}function we(t,e){return e.students.find((e=>e.username===t))}function ke(t,e,n){let o,s,l;r(t,st,(t=>n(5,o=t))),r(t,rt,(t=>n(6,s=t))),r(t,lt,(t=>n(1,l=t)));const c=o.studentIds;let i=s.username;return[i,l,c,function(){const t=we(i,l);t?(u(rt,s=t,s),u(lt,l.students=l.students.filter((t=>t.username!==i)),l)):u(rt,s={username:i,commentIds:[],submissionTime:""},s)},function(){i=C(this),n(0,i),n(2,c)}]}class Ce extends tt{constructor(t){super(),X(this,t,ke,xe,l,{})}}function Ie(t){let e,n,o;return{c(){e=m("Mark as "),n=m(t[4]),o=m("% and continue")},m(t,s){i(t,e,s),i(t,n,s),i(t,o,s)},p(t,e){16&e&&y(n,t[4])},d(t){t&&a(e),t&&a(n),t&&a(o)}}}function _e(e){let n;return{c(){n=m("Mark as perfect and continue")},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function De(t){let e,n,s,l,r,u,d,h,$,b,k,C,I,_,D,j,S,U,E,N,O,L,T,A,q,z,F,H,J,P,G,Q,X,tt,et,nt,ot,st,lt,rt,ut,ct=t[1].number+"",it=t[0].username+"";function at(t,e){return 100===t[4]?_e:Ie}z=new ce({});let dt=at(t),ft=dt(t);function mt(e){t[12].call(null,e)}P=new Ce({}),tt=new $e({});let pt={embeddedUrl:t[5],displayUrl:t[2]};return void 0!==t[3]&&(pt.iframeRef=t[3]),ot=new Kt({props:pt}),M.push((()=>B(ot,"iframeRef",mt))),{c(){e=f("div"),n=f("div"),s=p(),l=f("div"),r=f("div"),u=f("h1"),d=m("Grading homework "),h=m(ct),$=p(),b=f("div"),k=m("Due "),C=f("input"),I=p(),_=f("button"),_.textContent="Discard all progress",D=p(),j=f("h2"),S=f("div"),U=f("code"),E=m(it),N=m("\n\t\t\t\t("),O=m(t[4]),L=m("%)"),T=p(),A=f("button"),A.textContent="Reset and regrade",q=p(),V(z.$$.fragment),F=p(),H=f("button"),ft.c(),J=p(),V(P.$$.fragment),G=p(),Q=f("div"),X=p(),V(tt.$$.fragment),et=p(),nt=f("div"),V(ot.$$.fragment),w(n,"width",100*t[6]+"%"),v(n,"class","svelte-cjucuu"),v(e,"class","progress svelte-cjucuu"),v(u,"class","svelte-cjucuu"),v(C,"type","date"),v(S,"class","svelte-cjucuu"),v(j,"class","svelte-cjucuu"),v(H,"class","next svelte-cjucuu"),v(Q,"class","actions"),v(r,"class","sidebar svelte-cjucuu"),v(nt,"class","browser svelte-cjucuu"),v(l,"class","wrapper svelte-cjucuu")},m(o,a){i(o,e,a),c(e,n),i(o,s,a),i(o,l,a),c(l,r),c(r,u),c(u,d),c(u,h),c(r,$),c(r,b),c(b,k),c(b,C),x(C,t[1].dueDate),c(b,I),c(b,_),c(r,D),c(r,j),c(j,S),c(S,U),c(U,E),c(S,N),c(S,O),c(S,L),c(j,T),c(j,A),c(r,q),Z(z,r,null),c(r,F),c(r,H),ft.m(H,null),c(r,J),Z(P,r,null),c(r,G),c(r,Q),c(r,X),Z(tt,r,null),c(l,et),c(l,nt),Z(ot,nt,null),lt=!0,rt||(ut=[g(C,"input",t[11]),g(_,"click",t[9]),g(A,"click",t[8]),g(H,"click",t[7])],rt=!0)},p(t,[e]){(!lt||64&e)&&w(n,"width",100*t[6]+"%"),(!lt||2&e)&&ct!==(ct=t[1].number+"")&&y(h,ct),2&e&&x(C,t[1].dueDate),(!lt||1&e)&&it!==(it=t[0].username+"")&&y(E,it),(!lt||16&e)&&y(O,t[4]),dt===(dt=at(t))&&ft?ft.p(t,e):(ft.d(1),ft=dt(t),ft&&(ft.c(),ft.m(H,null)));const o={};32&e&&(o.embeddedUrl=t[5]),4&e&&(o.displayUrl=t[2]),!st&&8&e&&(st=!0,o.iframeRef=t[3],R((()=>st=!1))),ot.$set(o)},i(t){lt||(W(z.$$.fragment,t),W(P.$$.fragment,t),W(tt.$$.fragment,t),W(ot.$$.fragment,t),lt=!0)},o(t){Y(z.$$.fragment,t),Y(P.$$.fragment,t),Y(tt.$$.fragment,t),Y(ot.$$.fragment,t),lt=!1},d(t){t&&a(e),t&&a(s),t&&a(l),K(z),ft.d(),K(P),K(tt),K(ot),rt=!1,o(ut)}}}function je(t,e,n){let o,s,l,c,i,a,d,f;r(t,rt,(t=>n(0,c=t))),r(t,lt,(t=>n(1,i=t))),r(t,st,(t=>n(10,a=t))),r(t,ct,(t=>n(13,d=t))),r(t,it,(t=>n(14,f=t)));let m,p="";const h=new MutationObserver((t=>{if(t.find((t=>"data-newest-request"===t.attributeName))){const t=JSON.parse(document.body.dataset.newestRequest);u(ct,d=[t,...d],d)}if(t.find((t=>"data-embedded-url"===t.attributeName))){const t=p;if(n(2,p=JSON.parse(document.body.dataset.embeddedUrl)),It(t)!==It(p)){u(ct,d=[d[0]],d);const t=p.substring(0,p.lastIndexOf("/"));(function(t,e,n){const o=new URLSearchParams;return o.append("token",n.token),o.append("ls","yes"),o.append("url",t),fetch(n.endpoint,{method:"post",body:o}).then((t=>t.json())).then((t=>t.result.split("\n").map((t=>t.split(" "))).map((([t,n])=>({name:e+n.replace("./","/"),time:new Date(1e3*parseFloat(t))})))))})(p,t,a).then((t=>{t.forEach((({name:t,time:e})=>{u(it,f[t]=e,f)})),it.set(f)})).catch((t=>{}))}}}));return h.observe(document.body,{attributes:!0}),j((()=>{h.disconnect()})),t.$$.update=()=>{3&t.$$.dirty&&n(4,o=kt(c.commentIds,i.possibleComments)),3&t.$$.dirty&&n(5,s=`${i.prefix}/${c.username}/`),1026&t.$$.dirty&&n(6,l=i.students.length/a.studentIds.length)},[c,i,p,m,o,s,l,function(){Ct({type:"clear-cookies"}),u(lt,i.students=[...i.students,c],i),u(ct,d=[],d),dt()},function(){Ct({type:"clear-cookies",value:p}),u(lt,i.students=i.students.filter((t=>t.username!==c.username)),i),u(rt,c.commentIds=[],c),u(ct,d=[],d),n(3,m.src=s,m)},function(){u(lt,i=null,i),u(rt,c=null,c)},a,function(){i.dueDate=this.value,lt.set(i)},function(t){m=t,n(3,m)}]}class Se extends tt{constructor(t){super(),X(this,t,je,De,l,{})}}function Ue(t){let e,n;return e=new zt({props:{pluginInstalled:t[1]}}),{c(){V(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.pluginInstalled=t[1]),e.$set(o)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Me(t){let e,n,o,s;const l=[Ne,Ee],r=[];function u(t,e){return null!==t[0]?0:1}return e=u(t),n=r[e]=l[e](t),{c(){n.c(),o=h()},m(t,n){r[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e===c?r[e].p(t,s):(P(),Y(r[c],1,1,(()=>{r[c]=null})),G(),n=r[e],n?n.p(t,s):(n=r[e]=l[e](t),n.c()),W(n,1),n.m(o.parentNode,o))},i(t){s||(W(n),s=!0)},o(t){Y(n),s=!1},d(t){r[e].d(t),t&&a(o)}}}function Ee(e){let n,o;return n=new Ot({}),{c(){V(n.$$.fragment)},m(t,e){Z(n,t,e),o=!0},p:t,i(t){o||(W(n.$$.fragment,t),o=!0)},o(t){Y(n.$$.fragment,t),o=!1},d(t){K(n,t)}}}function Ne(t){let e,n,o,s;const l=[Le,Oe],r=[];function u(t,e){return null!==t[3]?0:1}return e=u(t),n=r[e]=l[e](t),{c(){n.c(),o=h()},m(t,n){r[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e!==c&&(P(),Y(r[c],1,1,(()=>{r[c]=null})),G(),n=r[e],n||(n=r[e]=l[e](t),n.c()),W(n,1),n.m(o.parentNode,o))},i(t){s||(W(n),s=!0)},o(t){Y(n),s=!1},d(t){r[e].d(t),t&&a(o)}}}function Oe(t){let e,n;return e=new Bt({}),{c(){V(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Le(t){let e,n;return e=new Se({}),{c(){V(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function Te(t){let e,n,o,s;const l=[Me,Ue],r=[];function u(t,e){return t[1]&&null!==t[2]?0:1}return e=u(t),n=r[e]=l[e](t),{c(){n.c(),o=h()},m(t,n){r[e].m(t,n),i(t,o,n),s=!0},p(t,[s]){let c=e;e=u(t),e===c?r[e].p(t,s):(P(),Y(r[c],1,1,(()=>{r[c]=null})),G(),n=r[e],n?n.p(t,s):(n=r[e]=l[e](t),n.c()),W(n,1),n.m(o.parentNode,o))},i(t){s||(W(n),s=!0)},o(t){Y(n),s=!1},d(t){r[e].d(t),t&&a(o)}}}const Re="gradable-plugin-present";function Ae(t,e,n){let o,s,l;r(t,lt,(t=>n(0,o=t))),r(t,st,(t=>n(2,s=t))),r(t,rt,(t=>n(3,l=t)));let u=document.body.classList.contains(Re);function c(){o&&Ct({type:"set-homework-number",value:o.number})}return new MutationObserver(((t,e)=>{t.find((t=>"class"===t.attributeName))&&document.body.classList.contains(Re)&&(n(1,u=!0),c(),e.disconnect())})).observe(document.body,{attributes:!0}),t.$$.update=()=>{1&t.$$.dirty&&o&&o.number&&c()},[o,u,s,l]}return new class extends tt{constructor(t){super(),X(this,t,Ae,Te,l,{})}}({target:document.body})}();
