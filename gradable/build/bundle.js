var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(t,e,n=e){return t.set(n),e}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function h(){return m("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e){t.value=null==e?"":e}function k(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function C(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function _(t,e,n){t.classList[n?"add":"remove"](e)}let S;function I(t){S=t}function O(t){(function(){if(!S)throw new Error("Function called outside component initialization");return S})().$$.on_destroy.push(t)}function D(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const U=[],T=[],L=[],M=[],E=Promise.resolve();let N=!1;function P(t){L.push(t)}function j(t){M.push(t)}let R=!1;const F=new Set;function H(){if(!R){R=!0;do{for(let t=0;t<U.length;t+=1){const e=U[t];I(e),z(e.$$)}for(I(null),U.length=0;T.length;)T.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];F.has(e)||(F.add(e),e())}L.length=0}while(U.length);for(;M.length;)M.pop()();N=!1,R=!1,F.clear()}}function z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const A=new Set;let q;function Y(){q={r:0,c:[],p:q}}function J(){q.r||o(q.c),q=q.p}function G(t,e){t&&t.i&&(A.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(A.has(t))return;A.add(t),q.c.push((()=>{A.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function B(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function K(t){t&&t.c()}function V(t,n,r){const{fragment:l,on_mount:u,on_destroy:c,after_update:i}=t.$$;l&&l.m(n,r),P((()=>{const n=u.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(P)}function Z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(U.push(t),N||(N=!0,E.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(e,s,r,l,u,c,i=[-1]){const d=S;I(e);const f=s.props||{},m=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:i,skip_bound:!1};let p=!1;if(m.ctx=r?r(e,f,((t,n,...o)=>{const s=o.length?o[0]:n;return m.ctx&&u(m.ctx[t],m.ctx[t]=s)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](s),p&&Q(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!l&&l(m.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();s.intro&&G(e.$$.fragment),V(e,s.target,s.anchor),H()}I(d)}class tt{$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et=[];function nt(e,n=t){let o;const s=[];function l(t){if(r(e,t)&&(e=t,o)){const t=!et.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),et.push(n,e)}if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,u=t){const c=[r,u];return s.push(c),1===s.length&&(o=n(l)||t),r(e),()=>{const t=s.indexOf(c);-1!==t&&s.splice(t,1),0===s.length&&(o(),o=null)}}}}function ot(t,e){const n=localStorage.getItem(t);let o=e||null;n&&(o=JSON.parse(n));const s=nt(o);return s.subscribe((e=>localStorage.setItem(t,JSON.stringify(e)))),s}const st=ot("config"),rt=ot("homework"),lt=ot("student"),ut=ot("checkpoints",[]),ct=nt([]),it=nt({}),at=nt(""),dt=nt(!1),ft=nt({});let mt=[],pt=0;function ht(t){const e=JSON.parse(localStorage.getItem("config")).students.map((t=>t.username)).filter((e=>!mt.includes(e)&&e!==t)),n=e.length;return n>0?e[pt%n]:null}function gt(){const t=ht();t?lt.set({username:t,commentIds:[]}):lt.set(null)}function $t(e){let n,s,r,l,u,d,h,$,b,y,k,C,_,S,I,O,D,U,T,L,M,E,N,j,R,F,H;return{c(){n=f("label"),s=f("span"),s.textContent="Homework number",r=p(),l=f("input"),u=p(),d=f("label"),h=f("span"),h.textContent="Due date (EOD)",$=p(),b=f("input"),y=p(),k=f("div"),C=m("https://"),_=f("select"),S=f("option"),S.textContent="fall",I=f("option"),I.textContent="spring",O=m("-"),D=f("input"),U=m(".cs.utexas.edu/"),T=f("input"),L=m("\n\nThe recommended workflow is as follows:\n\n"),M=f("ol"),M.innerHTML="<li>Wait for the student&#39;s directory to be unlocked (use the refresh button\n\t\tto check)</li> \n\t<li>Grade the student shown (chosen randomly)</li> \n\t<li>Click the next student button to load the next student randomly\n\t\t<ul><li>This should load faster because gradable already unlocked the\n\t\t\t\tfolder in the background</li> \n\t\t\t<li>Sometimes stuff goes wrong, click the ❌ in the top right to see\n\t\t\t\twhat happened</li></ul></li> \n\t<li>Once you are done, you will get a table of students, copy everything\n\t\tinto Canvas</li> \n\t<li>You&#39;re done!</li>",E=p(),N=f("button"),j=m("Start grading"),v(l,"type","text"),v(l,"placeholder","1"),v(l,"class","short svelte-1re6vz0"),v(b,"type","date"),v(b,"class","date"),S.__value="fall",S.value=S.__value,I.__value="spring",I.value=I.__value,void 0===e[0]&&P((()=>e[8].call(_))),v(D,"type","text"),v(D,"class","short svelte-1re6vz0"),v(T,"type","text"),T.readOnly=!0,v(k,"class","prefix svelte-1re6vz0"),N.disabled=R=!e[3]||!e[4]||!e[2]},m(t,o){i(t,n,o),c(n,s),c(n,r),c(n,l),w(l,e[3]),i(t,u,o),i(t,d,o),c(d,h),c(d,$),c(d,b),w(b,e[4]),i(t,y,o),i(t,k,o),c(k,C),c(k,_),c(_,S),c(_,I),x(_,e[0]),c(k,O),c(k,D),w(D,e[1]),c(k,U),c(k,T),w(T,e[2]),i(t,L,o),i(t,M,o),i(t,E,o),i(t,N,o),c(N,j),F||(H=[g(l,"input",e[6]),g(b,"input",e[7]),g(_,"change",e[8]),g(D,"input",e[9]),g(T,"input",e[10]),g(N,"click",e[5])],F=!0)},p(t,[e]){8&e&&l.value!==t[3]&&w(l,t[3]),16&e&&w(b,t[4]),1&e&&x(_,t[0]),2&e&&D.value!==t[1]&&w(D,t[1]),4&e&&T.value!==t[2]&&w(T,t[2]),28&e&&R!==(R=!t[3]||!t[4]||!t[2])&&(N.disabled=R)},i:t,o:t,d(t){t&&a(n),t&&a(u),t&&a(d),t&&a(y),t&&a(k),t&&a(L),t&&a(M),t&&a(E),t&&a(N),F=!1,o(H)}}}function vt(t,e,n){let o,s,r,c;l(t,rt,(t=>n(12,s=t))),l(t,ct,(t=>n(13,r=t))),l(t,it,(t=>n(14,c=t)));let i="",a="";const d=new Date;let f=d.getMonth()<6?"spring":"fall",m=d.getFullYear(),p="cs329e-bulko";return t.$$.update=()=>{7&t.$$.dirty&&(o=`https://${f}-${m}.cs.utexas.edu/${p}`)},[f,m,p,i,a,function(){u(rt,s={number:parseInt(i),dueDate:a,students:[],possibleComments:[{text:"One day late",points:10},{text:"Two days late",points:20},{text:"No submission",points:100}],prefix:o},s),u(ct,r=[],r),u(it,c={},c),gt()},function(){i=this.value,n(3,i)},function(){a=this.value,n(4,a)},function(){f=C(this),n(0,f)},function(){m=this.value,n(1,m)},function(){p=this.value,n(2,p)}]}rt.subscribe((t=>{mt=(null==t?void 0:t.students.map((t=>t.username)))||[],pt=function(t){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),(e^e>>>14)>>>0}(null==t?void 0:t.number)}));class bt extends tt{constructor(t){super(),X(this,t,vt,$t,r,{})}}var yt=["second","minute","hour","day","week","month","year"];var wt=["秒","分钟","小时","天","周","个月","年"];var kt={},xt=function(t,e){kt[t]=e},Ct=[60,60,24,7,365/7/12,12];function _t(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}var St=function(t,e,n){return function(t,e){for(var n=t<0?1:0,o=t=Math.abs(t),s=0;t>=Ct[s]&&s<Ct.length;s++)t/=Ct[s];return(t=Math.floor(t))>(0==(s*=2)?9:1)&&(s+=1),e(t,s,o)[n].replace("%s",t.toString())}(function(t,e){return(+(e?_t(e):new Date)-+_t(t))/1e3}(t,n&&n.relativeDate),function(t){return kt[t]||kt.en_US}(e))};function It(t){return St(new Date(t))}function Ot(t,e){let n=100;for(const o of t)n-=e[o].points;return n}xt("en_US",(function(t,e){if(0===e)return["just now","right now"];var n=yt[Math.floor(e/2)];return t>1&&(n+="s"),[t+" "+n+" ago","in "+t+" "+n]})),xt("zh_CN",(function(t,e){if(0===e)return["刚刚","片刻后"];var n=wt[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}));const Dt=document.getElementById("comms");function Ut(t){Dt.dataset.tellExtension=JSON.stringify(t)}function Tt(t){return t.split("/")[5]}function Lt(t){const[e,n]=t.split(" ").map((t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())).join(" ").split(";").map((t=>t.trim()));return{first:n,last:e}}function Mt(t){t.target.select()}function Et(t,e,n){const o=t.slice();return o[9]=e[n],o[11]=n,o}function Nt(t){let e,n,o,s,r,l=t[9].label+"",u=It(t[9].lastChange)+"";return{c(){e=f("option"),n=m(l),o=m(", saved "),s=m(u),r=p(),e.__value=t[11],e.value=e.__value},m(t,l){i(t,e,l),c(e,n),c(e,o),c(e,s),c(e,r)},p(t,e){2&e&&l!==(l=t[9].label+"")&&y(n,l),2&e&&u!==(u=It(t[9].lastChange)+"")&&y(s,u)},d(t){t&&a(e)}}}function Pt(e){let n,s,r,l,u,c=e[1],m=[];for(let t=0;t<c.length;t+=1)m[t]=Nt(Et(e,c,t));return{c(){n=f("select");for(let t=0;t<m.length;t+=1)m[t].c();s=p(),r=f("button"),r.textContent="Restore from save",void 0===e[0]&&P((()=>e[4].call(n)))},m(t,o){i(t,n,o);for(let t=0;t<m.length;t+=1)m[t].m(n,null);x(n,e[0]),i(t,s,o),i(t,r,o),l||(u=[g(n,"change",e[4]),g(r,"click",e[2])],l=!0)},p(t,[e]){if(2&e){let o;for(c=t[1],o=0;o<c.length;o+=1){const s=Et(t,c,o);m[o]?m[o].p(s,e):(m[o]=Nt(s),m[o].c(),m[o].m(n,null))}for(;o<m.length;o+=1)m[o].d(1);m.length=c.length}1&e&&x(n,t[0])},i:t,o:t,d(t){t&&a(n),d(m,t),t&&a(s),t&&a(r),l=!1,o(u)}}}function jt(t,e,n){let o,s,r,c,i,a;l(t,ut,(t=>n(3,s=t))),l(t,ct,(t=>n(5,r=t))),l(t,it,(t=>n(6,c=t))),l(t,rt,(t=>n(7,i=t))),l(t,lt,(t=>n(8,a=t)));let d=0;return t.$$.update=()=>{8&t.$$.dirty&&n(1,o=(null==s?void 0:s.sort(((t,e)=>e.lastChange-t.lastChange)))||[])},[d,o,function(){u(ct,r=[],r),u(it,c={},c);const t=s[d];u(rt,i=t.homework,i),u(lt,a=t.currentStudent,a),s.splice(d,1),ut.set(s)},s,function(){d=C(this),n(0,d)}]}class Rt extends tt{constructor(t){super(),X(this,t,jt,Pt,r,{})}}const Ft=document.location.href,Ht=`cd ~/public_html && wget -O gradable.php "${Ft}server/gradable.php" && chmod +x gradable.php`;function zt(t,e,n){return qt(!0,e,t,n)}function At(t,e,n){return qt(!1,e,t,n)}function qt(t,e,n,o){var s;const r=null===(s=o.students.find((t=>t.username===e)))||void 0===s?void 0:s.password;if(!r)throw new Error("Unknown student");if("UNKNOWN"===r)throw new Error("Unknown password");const l=new URLSearchParams;return l.append("token",o.token),l.append("lock",t?"yes":"no"),l.append("url",n),l.append("user",e),l.append("pass",r),fetch(o.endpoint,{method:"post",body:l}).then((t=>t.json()))}function Yt(t,e,n){const o=t.slice();return o[5]=e[n],o}function Jt(t){let e,n,o,s,r,l,u,h,$,b,y,w,k,x,C,_,S,I=t[0],O=[];for(let e=0;e<I.length;e+=1)O[e]=Gt(Yt(t,I,e));return{c(){e=f("table"),n=f("thead"),o=f("tr"),s=f("td"),s.textContent="last",r=p(),l=f("td"),l.textContent="first",u=p(),h=f("td"),h.textContent="username",$=p(),b=f("td"),y=f("label"),w=m("password\n\t\t\t\t\t\t\t"),k=f("input"),x=p(),C=f("tbody");for(let t=0;t<O.length;t+=1)O[t].c();v(k,"type","checkbox"),v(e,"class","svelte-5fmq9n")},m(a,d){i(a,e,d),c(e,n),c(n,o),c(o,s),c(o,r),c(o,l),c(o,u),c(o,h),c(o,$),c(o,b),c(b,y),c(y,w),c(y,k),k.checked=t[1],c(e,x),c(e,C);for(let t=0;t<O.length;t+=1)O[t].m(C,null);_||(S=g(k,"change",t[4]),_=!0)},p(t,e){if(2&e&&(k.checked=t[1]),3&e){let n;for(I=t[0],n=0;n<I.length;n+=1){const o=Yt(t,I,n);O[n]?O[n].p(o,e):(O[n]=Gt(o),O[n].c(),O[n].m(C,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=I.length}},d(t){t&&a(e),d(O,t),_=!1,S()}}}function Gt(t){let e,n,o,s,r,l,u,d,h,g,$,v,b,w=Lt(t[5].realname).last+"",k=Lt(t[5].realname).first+"",x=t[5].username+"",C=(t[1]?t[5].password:"••••••••")+"";return{c(){e=f("tr"),n=f("td"),o=m(w),s=p(),r=f("td"),l=m(k),u=p(),d=f("td"),h=m(x),g=p(),$=f("td"),v=m(C),b=p()},m(t,a){i(t,e,a),c(e,n),c(n,o),c(e,s),c(e,r),c(r,l),c(e,u),c(e,d),c(d,h),c(e,g),c(e,$),c($,v),c(e,b)},p(t,e){1&e&&w!==(w=Lt(t[5].realname).last+"")&&y(o,w),1&e&&k!==(k=Lt(t[5].realname).first+"")&&y(l,k),1&e&&x!==(x=t[5].username+"")&&y(h,x),3&e&&C!==(C=(t[1]?t[5].password:"••••••••")+"")&&y(v,C)},d(t){t&&a(e)}}}function Wt(e){let n,o,s,r,l,u,d,h,$,b,k,x,C=e[0].length+"",_=1===e[0].length?"student":"students",S=e[0].length>0&&Jt(e);return{c(){n=f("label"),o=f("h2"),s=m(C),r=p(),l=m(_),u=p(),d=f("p"),d.textContent="Each row should have the name, username, and password separated by a\n\t\ttab.",h=p(),$=f("textarea"),b=p(),S&&S.c(),v($,"rows","1"),v($,"class","svelte-5fmq9n")},m(t,a){i(t,n,a),c(n,o),c(o,s),c(o,r),c(o,l),c(n,u),c(n,d),c(n,h),c(n,$),w($,e[2]),c(n,b),S&&S.m(n,null),k||(x=g($,"input",e[3]),k=!0)},p(t,[e]){1&e&&C!==(C=t[0].length+"")&&y(s,C),1&e&&_!==(_=1===t[0].length?"student":"students")&&y(l,_),4&e&&w($,t[2]),t[0].length>0?S?S.p(t,e):(S=Jt(t),S.c(),S.m(n,null)):S&&(S.d(1),S=null)},i:t,o:t,d(t){t&&a(n),S&&S.d(),k=!1,x()}}}function Bt(t,e,n){let{students:o=[]}=e,{showPasswords:s=!1}=e,r=function(t){return t.map((t=>`${t.realname}\t${t.username}\t${t.password}`)).join("\n")}(o);return t.$$set=t=>{"students"in t&&n(0,o=t.students),"showPasswords"in t&&n(1,s=t.showPasswords)},t.$$.update=()=>{4&t.$$.dirty&&n(0,o=r.split("\n").filter((t=>!!t)).map((t=>t.split("\t"))).map((([t,e,n])=>({realname:t,username:e,password:n,canvasId:""}))))},[o,s,r,function(){r=this.value,n(2,r)},function(){s=this.checked,n(1,s)}]}class Kt extends tt{constructor(t){super(),X(this,t,Bt,Wt,r,{students:0,showPasswords:1})}}function Vt(t){let e,n,o,s;return o=new Rt({}),{c(){e=f("h1"),e.textContent="Load previous session",n=p(),K(o.$$.fragment),v(e,"class","svelte-tylxsl")},m(t,r){i(t,e,r),i(t,n,r),V(o,t,r),s=!0},i(t){s||(G(o.$$.fragment,t),s=!0)},o(t){W(o.$$.fragment,t),s=!1},d(t){t&&a(e),t&&a(n),Z(o,t)}}}function Zt(t){let e,n,s,r,l,u,c,d,h,$,b,w,k,x,C,_,S,I,O,D,U,L,M=t[0].endpoint+"";s=new bt({});let E=null!==t[1]&&t[1].length>0&&Vt();function N(e){t[4].call(null,e)}let P={};return void 0!==t[0].students&&(P.students=t[0].students),w=new Kt({props:P}),T.push((()=>B(w,"students",N))),{c(){e=f("h1"),e.textContent="Grade new homework",n=p(),K(s.$$.fragment),r=p(),E&&E.c(),l=p(),u=f("h1"),u.textContent="Configuration",c=p(),d=f("h2"),d.textContent="UT CS server endpoint",h=p(),$=m(M),b=p(),K(w.$$.fragment),x=p(),C=f("h2"),C.textContent="Reset",_=p(),S=f("button"),S.textContent="Delete local config and set up again",I=p(),O=f("button"),O.textContent="Reset server configuration",v(e,"class","svelte-tylxsl"),v(u,"class","svelte-tylxsl")},m(o,a){i(o,e,a),i(o,n,a),V(s,o,a),i(o,r,a),E&&E.m(o,a),i(o,l,a),i(o,u,a),i(o,c,a),i(o,d,a),i(o,h,a),i(o,$,a),i(o,b,a),V(w,o,a),i(o,x,a),i(o,C,a),i(o,_,a),i(o,S,a),i(o,I,a),i(o,O,a),D=!0,U||(L=[g(S,"click",t[3]),g(O,"click",t[2])],U=!0)},p(t,[e]){null!==t[1]&&t[1].length>0?E?2&e&&G(E,1):(E=Vt(),E.c(),G(E,1),E.m(l.parentNode,l)):E&&(Y(),W(E,1,1,(()=>{E=null})),J()),(!D||1&e)&&M!==(M=t[0].endpoint+"")&&y($,M);const n={};!k&&1&e&&(k=!0,n.students=t[0].students,j((()=>k=!1))),w.$set(n)},i(t){D||(G(s.$$.fragment,t),G(E),G(w.$$.fragment,t),D=!0)},o(t){W(s.$$.fragment,t),W(E),W(w.$$.fragment,t),D=!1},d(t){t&&a(e),t&&a(n),Z(s,t),t&&a(r),E&&E.d(t),t&&a(l),t&&a(u),t&&a(c),t&&a(d),t&&a(h),t&&a($),t&&a(b),Z(w,t),t&&a(x),t&&a(C),t&&a(_),t&&a(S),t&&a(I),t&&a(O),U=!1,o(L)}}}function Qt(t,e,n){let o,s;return l(t,st,(t=>n(0,o=t))),l(t,ut,(t=>n(1,s=t))),[o,s,function(){(function(t){const e=new URLSearchParams;return e.append("token",t.token),e.append("remove","yes"),fetch(t.endpoint,{method:"post",body:e}).then((t=>t.json()))})(o).then((({success:t})=>{t?alert("Server reset, you still need to delete gradable.php"):alert("Failed, could not reset")}))},function(){confirm("You are about to DELETE EVERYTHING, including your authentication token and "+s.length+" checkpoints. Make sure to delete the server config if you do not have a backup of the token. Are you sure you want to continue?")&&(localStorage.clear(),window.location=window.location)},function(t){o.students=t,st.set(o)}]}class Xt extends tt{constructor(t){super(),X(this,t,Qt,Zt,r,{})}}function te(t){let e,n,s,r,l,u,d,h,$,b,y,k,x,C,_,S,I,O,D,U,L,M,E,N,P,R,F,H,z,A,q,Y,J;function Q(e){t[8].call(null,e)}let X={showPasswords:!0};return void 0!==t[2]&&(X.students=t[2]),P=new Kt({props:X}),T.push((()=>B(P,"students",Q))),{c(){e=f("h1"),e.textContent="Setup",n=p(),s=f("ol"),r=f("li"),l=m("Enter your UT CS username:\n\t\t"),u=f("input"),d=p(),h=f("li"),$=m("Log in to your UT CS account and download the phpseclib library:\n\t\t"),b=f("input"),y=p(),k=f("li"),x=m("Then install the server integration script:\n\t\t"),C=f("input"),_=p(),S=f("li"),I=m("Go to "),O=f("a"),D=m("this link"),U=m(", copy the token,\n\t\tand paste it here:\n\t\t"),L=f("input"),M=p(),E=f("li"),E.textContent="Paste your list of students separated by linebreaks below.",N=p(),K(P.$$.fragment),F=p(),H=f("button"),z=m("Save and continue"),v(u,"type","text"),b.readOnly=!0,v(b,"type","text"),b.value=t[5],C.readOnly=!0,v(C,"type","text"),C.value=Ht,v(O,"href",t[3]),v(O,"target","_blank"),v(L,"type","text"),H.disabled=A=!t[1]||!t[0]||!t[2]},m(o,a){i(o,e,a),i(o,n,a),i(o,s,a),c(s,r),c(r,l),c(r,u),w(u,t[1]),c(s,d),c(s,h),c(h,$),c(h,b),c(s,y),c(s,k),c(k,x),c(k,C),c(s,_),c(s,S),c(S,I),c(S,O),c(O,D),c(S,U),c(S,L),w(L,t[0]),c(s,M),c(s,E),i(o,N,a),V(P,o,a),i(o,F,a),i(o,H,a),c(H,z),q=!0,Y||(J=[g(u,"input",t[6]),g(b,"click",Mt),g(b,"focus",Mt),g(C,"click",Mt),g(C,"focus",Mt),g(L,"input",t[7]),g(H,"click",t[4])],Y=!0)},p(t,[e]){2&e&&u.value!==t[1]&&w(u,t[1]),(!q||8&e)&&v(O,"href",t[3]),1&e&&L.value!==t[0]&&w(L,t[0]);const n={};!R&&4&e&&(R=!0,n.students=t[2],j((()=>R=!1))),P.$set(n),(!q||7&e&&A!==(A=!t[1]||!t[0]||!t[2]))&&(H.disabled=A)},i(t){q||(G(P.$$.fragment,t),q=!0)},o(t){W(P.$$.fragment,t),q=!1},d(t){t&&a(e),t&&a(n),t&&a(s),t&&a(N),Z(P,t),t&&a(F),t&&a(H),Y=!1,o(J)}}}function ee(t,e,n){let o,s,r;l(t,st,(t=>n(10,r=t)));let c="",i="",a=[];const d="wget https://github.com/phpseclib/phpseclib/archive/2.0.30.zip\nunzip 2.0.30.zip\nmv phpseclib-2.0.30/phpseclib phpseclib\nrm -rf phpseclib-2.0.30\nrm 2.0.30.zip\nchmod -R 755 phpseclib".split("\n").join(" && ");return t.$$.update=()=>{2&t.$$.dirty&&n(3,o=`https://www.cs.utexas.edu/~${i}/gradable.php`),13&t.$$.dirty&&(s={token:c,endpoint:o,students:a})},[c,i,a,o,function(){(function(t){const e=new URLSearchParams;return e.append("token",t.token),e.append("ping","yes"),fetch(t.endpoint,{method:"post",body:e}).then((t=>t.json()))})(s).then((t=>{t.success?u(st,r=s,r):alert("Invalid token")})).catch((()=>{alert("Could not connect to server")}))},d,function(){i=this.value,n(1,i)},function(){c=this.value,n(0,c)},function(t){a=t,n(2,a)}]}class ne extends tt{constructor(t){super(),X(this,t,ee,te,r,{})}}function oe(t,e,n){const o=t.slice();return o[10]=e[n],o[12]=n,o}function se(e){let n;return{c(){n=f("i"),n.textContent="none"},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function re(t){let e,n,s,r;return{c(){e=f("textarea"),e.readOnly=!0,e.value=n=t[4](t[10].commentIds,"\n"),v(e,"class","svelte-gmr12x")},m(t,n){i(t,e,n),s||(r=[g(e,"click",Mt),g(e,"focus",Mt)],s=!0)},p(t,o){2&o&&n!==(n=t[4](t[10].commentIds,"\n"))&&(e.value=n)},d(t){t&&a(e),s=!1,o(r)}}}function le(t){let e,n,s,r,l,u,d,h,$,b,w,k,x,C,_,S,I,O,D=Lt(t[10].realname).last+"",U=Lt(t[10].realname).first+"";function T(t,e){return t[10].commentIds.length>0?re:se}let L=T(t),M=L(t);function E(){return t[6](t[10])}return{c(){e=f("tr"),n=f("td"),s=m(D),r=m(",\n\t\t\t\t\t"),l=m(U),u=p(),d=f("td"),h=f("input"),b=m("%"),w=p(),k=f("td"),M.c(),x=p(),C=f("td"),_=f("button"),_.textContent="regrade",S=p(),h.readOnly=!0,v(h,"class","percentage svelte-gmr12x"),v(h,"type","text"),h.value=$=Ot(t[10].commentIds,t[0].possibleComments)},m(t,o){i(t,e,o),c(e,n),c(n,s),c(n,r),c(n,l),c(e,u),c(e,d),c(d,h),c(d,b),c(e,w),c(e,k),M.m(k,null),c(e,x),c(e,C),c(C,_),c(e,S),I||(O=[g(h,"click",Mt),g(h,"focus",Mt),g(_,"click",E)],I=!0)},p(e,n){t=e,2&n&&D!==(D=Lt(t[10].realname).last+"")&&y(s,D),2&n&&U!==(U=Lt(t[10].realname).first+"")&&y(l,U),3&n&&$!==($=Ot(t[10].commentIds,t[0].possibleComments))&&h.value!==$&&(h.value=$),L===(L=T(t))&&M?M.p(t,n):(M.d(1),M=L(t),M&&(M.c(),M.m(k,null)))},d(t){t&&a(e),M.d(),I=!1,o(O)}}}function ue(e){let n,o,s,r,l,u,m,h,$=e[1],b=[];for(let t=0;t<$.length;t+=1)b[t]=le(oe(e,$,t));return{c(){n=f("table"),o=f("thead"),o.innerHTML='<tr><td>name</td> \n\t\t\t<td>grade</td> \n\t\t\t<td width="99%">comments</td> \n\t\t\t<td>actions</td></tr>',s=p(),r=f("tbody");for(let t=0;t<b.length;t+=1)b[t].c();l=p(),u=f("button"),u.textContent="Export and continue",v(n,"class","svelte-gmr12x")},m(t,a){i(t,n,a),c(n,o),c(n,s),c(n,r);for(let t=0;t<b.length;t+=1)b[t].m(r,null);i(t,l,a),i(t,u,a),m||(h=g(u,"click",e[2]),m=!0)},p(t,[e]){if(27&e){let n;for($=t[1],n=0;n<$.length;n+=1){const o=oe(t,$,n);b[n]?b[n].p(o,e):(b[n]=le(o),b[n].c(),b[n].m(r,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=$.length}},i:t,o:t,d(t){t&&a(n),d(b,t),t&&a(l),t&&a(u),m=!1,h()}}}function ce(t,e,n){let o,s,r,c,i;function a(t){u(lt,i=t,i),u(rt,s.students=s.students.filter((e=>e.username!==t.username)),s)}function d(t,e){return t.map((t=>s.possibleComments[t])).map((({points:t,text:e})=>`-${t}: ${e}`)).join(e)}l(t,rt,(t=>n(0,s=t))),l(t,st,(t=>n(5,r=t))),l(t,ut,(t=>n(7,c=t))),l(t,lt,(t=>n(8,i=t)));return t.$$.update=()=>{33&t.$$.dirty&&n(1,o=s?r.students.map((t=>Object.assign({realname:t.realname},(null==s?void 0:s.students.find((e=>e.username===t.username)))||{}))):[])},[s,o,function(){u(ut,c=[...c,{label:"HW "+s.number,lastChange:(new Date).getTime(),homework:s,currentStudent:null}],c);let t="name\tscore\tcomments\n";o.forEach((e=>{t+=e.username,t+="\t",t+=Ot(e.commentIds,null==s?void 0:s.possibleComments),t+="\t",t+=d(e.commentIds,"; "),t+="\n"}));const e=document.createElement("a");e.setAttribute("href","data:text/tab-separated-values;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",`HW${s.number}export-${(new Date).getTime()/1e3|0}.csv`),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),u(rt,s=null,s)},a,d,r,t=>{a(t)}]}class ie extends tt{constructor(t){super(),X(this,t,ce,ue,r,{})}}function ae(t,e,n){const o=t.slice();return o[17]=e[n].username,o[18]=e[n].lock,o[19]=e[n].status,o[20]=e[n].details,o[22]=n,o}function de(t){let e;return{c(){e=m("❌")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function fe(t){let e;return{c(){e=m("✔️")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function me(t){let e;return{c(){e=m("⌛")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function pe(t){let e,n,s,r,l,u,h,$,b,w,k,x,C,_,S=t[2].username+"",I=t[1],O=[];for(let e=0;e<I.length;e+=1)O[e]=be(ae(t,I,e));return{c(){e=f("div"),n=f("div"),s=f("div"),r=m(S),l=p(),u=f("button"),u.textContent="Unlock",h=p(),$=f("button"),$.textContent="Lock",b=p(),w=f("small"),w.textContent="Locking and unlocking is not instant. You might need to wait a\n\t\t\tminute or two until changes take effect. Use the refresh button to\n\t\t\tcheck.",k=p(),x=f("div");for(let t=0;t<O.length;t+=1)O[t].c();v(n,"class","split actions svelte-19tk1u7"),v(x,"class","requests svelte-19tk1u7"),v(e,"class","details svelte-19tk1u7")},m(o,a){i(o,e,a),c(e,n),c(n,s),c(s,r),c(n,l),c(n,u),c(n,h),c(n,$),c(e,b),c(e,w),c(e,k),c(e,x);for(let t=0;t<O.length;t+=1)O[t].m(x,null);C||(_=[g(u,"click",t[6]),g($,"click",t[7])],C=!0)},p(t,e){if(4&e&&S!==(S=t[2].username+"")&&y(r,S),3&e){let n;for(I=t[1],n=0;n<I.length;n+=1){const o=ae(t,I,n);O[n]?O[n].p(o,e):(O[n]=be(o),O[n].c(),O[n].m(x,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=I.length}},d(t){t&&a(e),d(O,t),C=!1,o(_)}}}function he(t){let e;return{c(){e=m("failed")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function ge(t){let e;return{c(){e=m("done")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function $e(t){let e;return{c(){e=m("waiting")},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function ve(t){let e,n,o=t[20]+"";return{c(){e=f("pre"),n=m(o),v(e,"class","svelte-19tk1u7")},m(t,o){i(t,e,o),c(e,n)},p(t,e){2&e&&o!==(o=t[20]+"")&&y(n,o)},d(t){t&&a(e)}}}function be(t){let e,n,o,s,r,l,u,d,h,g,$=t[17]+"",b=t[18]?"lock":"unlock";function w(t,e){return t[19]===t[0].Pending?$e:t[19]===t[0].Success?ge:t[19]===t[0].Failed?he:void 0}let x=w(t),C=x&&x(t),_=t[19]===t[0].Failed&&ve(t);return{c(){e=f("div"),n=f("div"),o=f("div"),s=m($),r=m(" ("),l=m(b),u=m(")"),d=p(),C&&C.c(),h=p(),_&&_.c(),g=p(),v(n,"class","split"),k(e,"opacity",(we-t[22])/we)},m(t,a){i(t,e,a),c(e,n),c(n,o),c(o,s),c(o,r),c(o,l),c(o,u),c(n,d),C&&C.m(n,null),c(e,h),_&&_.m(e,null),c(e,g)},p(t,o){2&o&&$!==($=t[17]+"")&&y(s,$),2&o&&b!==(b=t[18]?"lock":"unlock")&&y(l,b),x!==(x=w(t))&&(C&&C.d(1),C=x&&x(t),C&&(C.c(),C.m(n,null))),t[19]===t[0].Failed?_?_.p(t,o):(_=ve(t),_.c(),_.m(e,g)):_&&(_.d(1),_=null)},d(t){t&&a(e),C&&C.d(),_&&_.d()}}}function ye(e){let n,s,r,l,u;function c(t,e){return t[4]===t[0].Pending?me:t[4]===t[0].Success?fe:t[4]===t[0].Failed?de:void 0}let d=c(e),m=d&&d(e),$=e[3]&&pe(e);return{c(){n=f("button"),m&&m.c(),s=p(),$&&$.c(),r=h(),v(n,"class","entry svelte-19tk1u7")},m(t,o){i(t,n,o),m&&m.m(n,null),i(t,s,o),$&&$.m(t,o),i(t,r,o),l||(u=[g(window,"beforeunload",e[5]),g(n,"click",e[8])],l=!0)},p(t,[e]){d!==(d=c(t))&&(m&&m.d(1),m=d&&d(t),m&&(m.c(),m.m(n,null))),t[3]?$?$.p(t,e):($=pe(t),$.c(),$.m(r.parentNode,r)):$&&($.d(1),$=null)},i:t,o:t,d(t){t&&a(n),m&&m.d(),t&&a(s),$&&$.d(t),t&&a(r),l=!1,o(u)}}}const we=5;function ke(t,e,n){let o,s,r,c;var i;l(t,rt,(t=>n(12,o=t))),l(t,lt,(t=>n(2,s=t))),l(t,st,(t=>n(13,r=t))),l(t,ft,(t=>n(14,c=t))),function(t){t[t.Pending=0]="Pending",t[t.Success=1]="Success",t[t.Failed=2]="Failed"}(i||(i={}));let a=o.prefix,d=[],f=!1,m=!1,p=!1,h=i.Success,g=null;function $(t,e,o){const s=`${a}/${t}/`,l={username:t,lock:e,status:i.Pending,details:""};n(1,d=[l,...d]),(e?zt:At)(s,t,r).then((e=>{e.success?(l.status=i.Success,o&&o()):(n(9,p=!0),l.status=i.Failed,l.details=e.result,u(ft,c[t]=l.details,c)),n(1,d=d.slice(0,we))})).catch((e=>{n(9,p=!0),l.status=i.Failed,l.details=e,n(1,d=d.slice(0,we)),u(ft,c[t]=l.details,c)}))}return O((()=>{g&&$(g,!0)})),t.$$.update=()=>{if(1028&t.$$.dirty&&g!==s.username){g?$(g,!0):s&&$(s.username,!1);const t=s&&ht(s.username);t&&$(t,!1),f=!1,n(10,g=s.username)}515&t.$$.dirty&&(d.find((t=>t.status===i.Pending))?n(4,h=i.Pending):n(4,h=p?i.Failed:i.Success))},[i,d,s,m,h,function(t){if(!f){$(s.username,!0,(()=>f=!0));const e=s&&ht(s.username);return e&&$(e,!0),t.preventDefault(),t.returnValue="","Locking current student's assignment... You can probably close this tab."}},function(){$(s.username,!1)},function(){$(s.username,!0)},function(){n(3,m=!m),n(9,p=!1)},p,g]}class xe extends tt{constructor(t){super(),X(this,t,ke,ye,r,{})}}function Ce(e){let n;return{c(){n=f("div"),n.innerHTML="<h3>Waiting on unlock</h3>\n\t\t\t\tThis shouldn&#39;t take longer than five minutes.",v(n,"class","waiting message svelte-uy8sw3")},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function _e(t){let e,n,o,s,r;return{c(){e=f("div"),n=f("h3"),n.textContent="Failed to load",o=m("\n\t\t\t\tYou might need to manually SSH in to investigate.\n\t\t\t\t"),s=f("pre"),r=m(t[2]),v(s,"class","svelte-uy8sw3"),v(e,"class","message svelte-uy8sw3")},m(t,l){i(t,e,l),c(e,n),c(e,o),c(e,s),c(s,r)},p(t,e){4&e&&y(r,t[2])},d(t){t&&a(e)}}}function Se(t){let e,n,s,r,l,u,d,h,$,b,w,k,x,C,S,I,O,D,U;function T(t,e){return void 0!==t[2]?_e:t[3]?Ce:void 0}d=new xe({});let L=T(t),M=L&&L(t);return{c(){e=f("div"),n=f("div"),s=f("a"),r=m(t[4]),l=f("span"),l.textContent="ignore",u=p(),K(d.$$.fragment),h=p(),$=f("button"),$.textContent="Clear cookies",b=p(),w=f("button"),w.textContent="Refresh",k=p(),x=f("div"),M&&M.c(),C=p(),S=f("iframe"),v(l,"class","svelte-uy8sw3"),v(s,"href",t[4]),v(s,"class","location svelte-uy8sw3"),v(s,"target","_blank"),v(n,"class","top svelte-uy8sw3"),S.src!==(I=t[1])&&v(S,"src",I),v(S,"frameborder","0"),v(S,"title","Embedded website to grade"),v(S,"class","svelte-uy8sw3"),_(S,"faded",void 0!==t[2]||t[3]),v(x,"class","main svelte-uy8sw3"),v(e,"class","browser svelte-uy8sw3")},m(o,a){i(o,e,a),c(e,n),c(n,s),c(s,r),c(s,l),c(n,u),V(d,n,null),c(n,h),c(n,$),c(n,b),c(n,w),c(e,k),c(e,x),M&&M.m(x,null),c(x,C),c(x,S),t[11](S),O=!0,D||(U=[g(window,"keydown",t[7]),g($,"click",t[6]),g(w,"click",t[5])],D=!0)},p(t,[e]){(!O||16&e)&&y(r,t[4]),(!O||16&e)&&v(s,"href",t[4]),L===(L=T(t))&&M?M.p(t,e):(M&&M.d(1),M=L&&L(t),M&&(M.c(),M.m(x,C))),(!O||2&e&&S.src!==(I=t[1]))&&v(S,"src",I),12&e&&_(S,"faded",void 0!==t[2]||t[3])},i(t){O||(G(d.$$.fragment,t),O=!0)},o(t){W(d.$$.fragment,t),O=!1},d(n){n&&a(e),Z(d),M&&M.d(),t[11](null),D=!1,o(U)}}}function Ie(t,e,n){let o,s,r,u,c;l(t,at,(t=>n(4,s=t))),l(t,ct,(t=>n(8,r=t))),l(t,ft,(t=>n(9,u=t))),l(t,lt,(t=>n(10,c=t)));let{embeddedUrl:i="about:blank"}=e,{iframeRef:a}=e;function d(){Ut({type:"refresh-page"})}let f=!0;return t.$$set=t=>{"embeddedUrl"in t&&n(1,i=t.embeddedUrl),"iframeRef"in t&&n(0,a=t.iframeRef)},t.$$.update=()=>{256&t.$$.dirty&&r[0]&&(403===r[0].statusCode?(n(3,f=!0),setTimeout(d,1e3)):n(3,f=!1)),1536&t.$$.dirty&&n(2,o=u[c.username]),1540&t.$$.dirty&&console.log(u,c.username,o)},[a,i,o,f,s,d,function(){Ut({type:"clear-cookies",value:s})},function(t){82===t.keyCode&&t.ctrlKey&&(d(),t.preventDefault())},r,u,c,function(t){T[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class Oe extends tt{constructor(t){super(),X(this,t,Ie,Se,r,{embeddedUrl:1,iframeRef:0})}}function De(e){let n,s,r,l,u,d;return{c(){n=f("div"),s=f("div"),s.textContent="-",r=p(),l=f("input"),v(s,"class","minus svelte-mu2102"),v(l,"type","number"),v(l,"class","points svelte-mu2102"),v(l,"placeholder","5"),v(n,"class","join svelte-mu2102")},m(t,o){i(t,n,o),c(n,s),c(n,r),c(n,l),w(l,e[0]),u||(d=[g(l,"input",e[4]),g(l,"keyup",$(e[1])),g(l,"blur",e[2]),g(l,"change",e[3])],u=!0)},p(t,[e]){1&e&&b(l.value)!==t[0]&&w(l,t[0])},i:t,o:t,d(t){t&&a(n),u=!1,o(d)}}}function Ue(t,e,n){let{value:o}=e;return t.$$set=t=>{"value"in t&&n(0,o=t.value)},[o,function(e){D(t,e)},function(e){D(t,e)},function(e){D(t,e)},function(){o=b(this.value),n(0,o)}]}class Te extends tt{constructor(t){super(),X(this,t,Ue,De,r,{value:0})}}function Le(t){let e,n,s,r,l,u,d,m,h,$,b,y,k;function x(e){t[7].call(null,e)}let C={};return void 0!==t[0].points&&(C.value=t[0].points),u=new Te({props:C}),T.push((()=>B(u,"value",x))),u.$on("change",t[4]),{c(){e=f("tr"),n=f("td"),s=f("input"),r=p(),l=f("td"),K(u.$$.fragment),m=p(),h=f("td"),$=f("input"),v(s,"type","text"),v(s,"placeholder","Missing name"),v(s,"class","svelte-1te1hhk"),v(n,"class","comment svelte-1te1hhk"),v($,"type","checkbox"),$.checked=t[2],v($,"class","svelte-1te1hhk"),v(h,"class","toggle svelte-1te1hhk"),v(e,"class","svelte-1te1hhk"),_(e,"inactive",!t[2])},m(o,a){i(o,e,a),c(e,n),c(n,s),w(s,t[0].text),c(e,r),c(e,l),V(u,l,null),c(e,m),c(e,h),c(h,$),b=!0,y||(k=[g(s,"input",t[6]),g(s,"change",t[4]),g($,"change",t[8]),g(h,"click",t[9])],y=!0)},p(t,[n]){1&n&&s.value!==t[0].text&&w(s,t[0].text);const o={};!d&&1&n&&(d=!0,o.value=t[0].points,j((()=>d=!1))),u.$set(o),(!b||4&n)&&($.checked=t[2]),4&n&&_(e,"inactive",!t[2])},i(t){b||(G(u.$$.fragment,t),b=!0)},o(t){W(u.$$.fragment,t),b=!1},d(t){t&&a(e),Z(u),y=!1,o(k)}}}function Me(t,e,n){let o,s,r;l(t,lt,(t=>n(5,s=t))),l(t,rt,(t=>n(10,r=t)));let{comment:c}=e,{commentId:i}=e;function a(t,e){t?s.commentIds.includes(e)||u(lt,s.commentIds=[...s.commentIds,e],s):u(lt,s.commentIds=s.commentIds.filter((t=>t!==e)),s)}return t.$$set=t=>{"comment"in t&&n(0,c=t.comment),"commentId"in t&&n(1,i=t.commentId)},t.$$.update=()=>{34&t.$$.dirty&&n(2,o=s.commentIds.includes(i))},[c,i,o,a,function(){u(rt,r.possibleComments[i]=c,r)},s,function(){c.text=this.value,n(0,c)},function(t){c.points=t,n(0,c)},t=>a(t.target.checked,i),()=>a(!o,i)]}class Ee extends tt{constructor(t){super(),X(this,t,Me,Le,r,{comment:0,commentId:1})}}function Ne(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function Pe(t){let e,n;return e=new Ee({props:{comment:t[8],commentId:t[10]}}),{c(){K(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},p(t,n){const o={};4&n&&(o.comment=t[8]),e.$set(o)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function je(t){let e,n,s,r,l,u,m,h,b,y,k,x,C,_,S,I,O=t[2].possibleComments,D=[];for(let e=0;e<O.length;e+=1)D[e]=Pe(Ne(t,O,e));const U=t=>W(D[t],1,1,(()=>{D[t]=null}));function L(e){t[6].call(null,e)}let M={};return void 0!==t[0]&&(M.value=t[0]),h=new Te({props:M}),T.push((()=>B(h,"value",L))),h.$on("keyup",t[3]),h.$on("blur",t[4]),{c(){e=f("table");for(let t=0;t<D.length;t+=1)D[t].c();n=p(),s=f("tr"),r=f("td"),l=f("input"),u=p(),m=f("td"),K(h.$$.fragment),y=p(),k=f("td"),x=p(),C=f("small"),C.textContent="Use the checkboxes to the right to mark off points. To add a new penalty,\n\tenter a comment and the number of points to remove. Changing text or points\n\twill update for all students.",v(l,"type","text"),v(l,"placeholder","Missing name"),v(l,"class","svelte-1at0h8t"),v(r,"class","comment svelte-1at0h8t"),v(e,"class","svelte-1at0h8t"),v(C,"class","svelte-1at0h8t")},m(o,a){i(o,e,a);for(let t=0;t<D.length;t+=1)D[t].m(e,null);c(e,n),c(e,s),c(s,r),c(r,l),w(l,t[1]),c(s,u),c(s,m),V(h,m,null),c(s,y),c(s,k),i(o,x,a),i(o,C,a),_=!0,S||(I=[g(l,"input",t[5]),g(l,"keyup",$(t[3])),g(l,"blur",t[4])],S=!0)},p(t,[o]){if(4&o){let s;for(O=t[2].possibleComments,s=0;s<O.length;s+=1){const r=Ne(t,O,s);D[s]?(D[s].p(r,o),G(D[s],1)):(D[s]=Pe(r),D[s].c(),G(D[s],1),D[s].m(e,n))}for(Y(),s=O.length;s<D.length;s+=1)U(s);J()}2&o&&l.value!==t[1]&&w(l,t[1]);const s={};!b&&1&o&&(b=!0,s.value=t[0],j((()=>b=!1))),h.$set(s)},i(t){if(!_){for(let t=0;t<O.length;t+=1)G(D[t]);G(h.$$.fragment,t),_=!0}},o(t){D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)W(D[t]);W(h.$$.fragment,t),_=!1},d(t){t&&a(e),d(D,t),Z(h),t&&a(x),t&&a(C),S=!1,o(I)}}}function Re(t,e,n){let o,s;l(t,rt,(t=>n(2,o=t))),l(t,lt,(t=>n(7,s=t)));let r="",c="";function i(){if(r&&c){let t=o.possibleComments.map((t=>t.text)).indexOf(c);-1===t?(t=o.possibleComments.length,u(rt,o.possibleComments=[...o.possibleComments,{text:c,points:parseInt(r,10)}],o)):u(rt,o.possibleComments[t].points=parseInt(r,10),o),s.commentIds.includes(t)||u(lt,s.commentIds=[...s.commentIds,t],s),n(0,r=n(1,c=""))}}return[r,c,o,function(t){"Enter"==t.code&&i()},i,function(){c=this.value,n(1,c)},function(t){r=t,n(0,r)}]}class Fe extends tt{constructor(t){super(),X(this,t,Re,je,r,{})}}function He(t,e,n){const o=t.slice();return o[8]=e[n],o}function ze(t){let e;return{c(){e=f("tr"),e.innerHTML="<i>No requests logged</i>"},m(t,n){i(t,e,n)},d(t){t&&a(e)}}}function Ae(e){let n;return{c(){n=f("td"),n.innerHTML="<i>unknown</i>"},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function qe(t){let e,n,o,s=new Date(t[8].lastModified).toLocaleString()+"",r=t[8].daysLate>0&&Ye(t);return{c(){e=f("td"),r&&r.c(),n=p(),o=m(s)},m(t,s){i(t,e,s),r&&r.m(e,null),c(e,n),c(e,o)},p(t,l){t[8].daysLate>0?r?r.p(t,l):(r=Ye(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),2&l&&s!==(s=new Date(t[8].lastModified).toLocaleString()+"")&&y(o,s)},d(t){t&&a(e),r&&r.d()}}}function Ye(t){let e,n,o=t[8].daysLate+"";return{c(){e=f("div"),n=m(o),v(e,"class","latebadge svelte-1w8y9g0")},m(t,o){i(t,e,o),c(e,n)},p(t,e){2&e&&o!==(o=t[8].daysLate+"")&&y(n,o)},d(t){t&&a(e)}}}function Je(t){let e,n,o,s,r,l,u,d,h,g,$,b=t[8].statusCode+"",w=t[8].displayUrl+"";function k(t,e){return t[8].lastModified?qe:Ae}let x=k(t),C=x(t);return{c(){e=f("tr"),n=f("td"),o=m(b),s=p(),C.c(),r=p(),l=f("td"),u=f("a"),d=m(w),$=p(),v(u,"href",h=t[8].url),v(u,"target","_blank"),v(l,"title",g=t[8].url)},m(t,a){i(t,e,a),c(e,n),c(n,o),c(e,s),C.m(e,null),c(e,r),c(e,l),c(l,u),c(u,d),c(e,$)},p(t,n){2&n&&b!==(b=t[8].statusCode+"")&&y(o,b),x===(x=k(t))&&C?C.p(t,n):(C.d(1),C=x(t),C&&(C.c(),C.m(e,r))),2&n&&w!==(w=t[8].displayUrl+"")&&y(d,w),2&n&&h!==(h=t[8].url)&&v(u,"href",h),2&n&&g!==(g=t[8].url)&&v(l,"title",g)},d(t){t&&a(e),C.d()}}}function Ge(e){let n,o,s,r,l,u,h,b,w,k,x,C,S,I,O,D,U=1===e[0]?"day":"days",T=e[1],L=[];for(let t=0;t<T.length;t+=1)L[t]=Je(He(e,T,t));let M=null;return T.length||(M=ze()),{c(){n=f("div"),o=f("div"),s=m("Most recent change made "),r=m(e[0]),l=p(),u=m(U),h=m(" late."),b=p(),w=f("a"),w.textContent="Clear",k=p(),x=f("div"),C=f("table");for(let t=0;t<L.length;t+=1)L[t].c();M&&M.c(),S=p(),I=f("div"),v(o,"class","svelte-1w8y9g0"),v(w,"href","#clear"),v(w,"class","svelte-1w8y9g0"),v(n,"class","summary svelte-1w8y9g0"),_(n,"late",e[0]>0),v(C,"class","svelte-1w8y9g0"),v(I,"class","fade svelte-1w8y9g0"),v(x,"class","wrap svelte-1w8y9g0")},m(t,a){i(t,n,a),c(n,o),c(o,s),c(o,r),c(o,l),c(o,u),c(o,h),c(n,b),c(n,w),i(t,k,a),i(t,x,a),c(x,C);for(let t=0;t<L.length;t+=1)L[t].m(C,null);M&&M.m(C,null),c(x,S),c(x,I),O||(D=g(w,"click",$(e[2])),O=!0)},p(t,[e]){if(1&e&&y(r,t[0]),1&e&&U!==(U=1===t[0]?"day":"days")&&y(u,U),1&e&&_(n,"late",t[0]>0),2&e){let n;for(T=t[1],n=0;n<T.length;n+=1){const o=He(t,T,n);L[n]?L[n].p(o,e):(L[n]=Je(o),L[n].c(),L[n].m(C,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=T.length,T.length?M&&(M.d(1),M=null):M||(M=ze(),M.c(),M.m(C,null))}},i:t,o:t,d(t){t&&a(n),t&&a(k),t&&a(x),d(L,t),M&&M.d(),O=!1,D()}}}function We(t,e){const n=(e-new Date(t).getTime())/1e3,o=-Math.floor(Math.min(0,n/60/60/24));return o>0?o:0}function Be(t,e,n){let o,s,r,c,i,a;l(t,rt,(t=>n(4,r=t))),l(t,ct,(t=>n(5,c=t))),l(t,it,(t=>n(6,i=t))),l(t,lt,(t=>n(7,a=t)));let d=0;return t.$$.update=()=>{if(16&t.$$.dirty&&n(3,o=new Date(r.dueDate+" 23:59:59").getTime()),232&t.$$.dirty&&n(1,s=c.map((t=>{return Object.assign(Object.assign({},t),{lastModified:(e=i,n=t.url,e[n=n.split("?")[0]]||e[n+"index.html"]||e[n+"index.htm"]||e[n+"index.php"]),displayUrl:t.url.split(a.username)[1]||t.url});var e,n})).map((t=>Object.assign(Object.assign({},t),{daysLate:We(t.lastModified,o)})))),11&t.$$.dirty){const t=s.filter((t=>!!t.lastModified)).map((t=>We(t.lastModified,o)));n(0,d=Math.max(...t)),n(0,d=isFinite(d)?d:0)}},[d,s,function(){u(ct,c=[],c)},o,r,c,i,a]}class Ke extends tt{constructor(t){super(),X(this,t,Be,Ge,r,{})}}function Ve(t){let e,n,o;return{c(){e=m("Mark as "),n=m(t[3]),o=m("% and continue")},m(t,s){i(t,e,s),i(t,n,s),i(t,o,s)},p(t,e){8&e&&y(n,t[3])},d(t){t&&a(e),t&&a(n),t&&a(o)}}}function Ze(e){let n;return{c(){n=m("Mark as perfect and continue")},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function Qe(t){let e,n,s,r,l,u,d,h,$,b,x,C,_,S,I,O,D,U,L,M,E,N,P,R,F,H,z,A,q,Y,J,Q,X,tt,et,nt,ot,st,rt=t[1].number+"",lt=t[0].username+"";function ut(t,e){return 100===t[3]?Ze:Ve}R=new Fe({});let ct=ut(t),it=ct(t);function at(e){t[12].call(null,e)}A=new Ke({});let dt={embeddedUrl:t[4]};return void 0!==t[2]&&(dt.iframeRef=t[2]),J=new Oe({props:dt}),T.push((()=>B(J,"iframeRef",at))),{c(){e=f("div"),n=f("div"),s=f("h1"),r=m("Grading homework "),l=m(rt),u=p(),d=f("div"),h=f("div"),$=m("Due "),b=f("input"),x=p(),C=f("button"),C.textContent="Discard all progress",_=p(),S=f("h2"),I=f("div"),O=f("code"),D=m(lt),U=m("\n\t\t\t\t("),L=m(t[3]),M=m("%)"),E=p(),N=f("button"),N.textContent="Reset and regrade",P=p(),K(R.$$.fragment),F=p(),H=f("button"),it.c(),z=p(),K(A.$$.fragment),q=p(),Y=f("div"),K(J.$$.fragment),X=p(),tt=f("div"),et=f("div"),v(s,"class","svelte-3muhno"),v(b,"type","date"),v(d,"class","split"),v(S,"class","split"),v(H,"class","next svelte-3muhno"),v(n,"class","sidebar svelte-3muhno"),v(Y,"class","browser svelte-3muhno"),v(e,"class","wrapper svelte-3muhno"),k(et,"width",100*t[5]+"%"),v(et,"class","svelte-3muhno"),v(tt,"class","progress svelte-3muhno")},m(o,a){i(o,e,a),c(e,n),c(n,s),c(s,r),c(s,l),c(n,u),c(n,d),c(d,h),c(h,$),c(h,b),w(b,t[1].dueDate),c(d,x),c(d,C),c(n,_),c(n,S),c(S,I),c(I,O),c(O,D),c(I,U),c(I,L),c(I,M),c(S,E),c(S,N),c(n,P),V(R,n,null),c(n,F),c(n,H),it.m(H,null),c(n,z),V(A,n,null),c(e,q),c(e,Y),V(J,Y,null),i(o,X,a),i(o,tt,a),c(tt,et),nt=!0,ot||(st=[g(b,"input",t[11]),g(C,"click",t[8]),g(N,"click",t[7]),g(H,"click",t[6])],ot=!0)},p(t,[e]){(!nt||2&e)&&rt!==(rt=t[1].number+"")&&y(l,rt),2&e&&w(b,t[1].dueDate),(!nt||1&e)&&lt!==(lt=t[0].username+"")&&y(D,lt),(!nt||8&e)&&y(L,t[3]),ct===(ct=ut(t))&&it?it.p(t,e):(it.d(1),it=ct(t),it&&(it.c(),it.m(H,null)));const n={};16&e&&(n.embeddedUrl=t[4]),!Q&&4&e&&(Q=!0,n.iframeRef=t[2],j((()=>Q=!1))),J.$set(n),(!nt||32&e)&&k(et,"width",100*t[5]+"%")},i(t){nt||(G(R.$$.fragment,t),G(A.$$.fragment,t),G(J.$$.fragment,t),nt=!0)},o(t){W(R.$$.fragment,t),W(A.$$.fragment,t),W(J.$$.fragment,t),nt=!1},d(t){t&&a(e),Z(R),it.d(),Z(A),Z(J),t&&a(X),t&&a(tt),ot=!1,o(st)}}}function Xe(t,e,n){let o,s,r,c,i,a,d,f,m;l(t,lt,(t=>n(0,c=t))),l(t,rt,(t=>n(1,i=t))),l(t,st,(t=>n(10,a=t))),l(t,ct,(t=>n(13,d=t))),l(t,it,(t=>n(14,f=t))),l(t,at,(t=>n(15,m=t)));let p,h=c.username;return t.$$.update=()=>{3&t.$$.dirty&&n(3,o=Ot(c.commentIds,i.possibleComments)),3&t.$$.dirty&&n(4,s=`${i.prefix}/${c.username}/`),1026&t.$$.dirty&&n(5,r=i.students.length/(a.students.length+1)),513&t.$$.dirty&&h!==c.username&&(n(9,h=c.username),u(ct,d=[],d),u(it,f={},f))},[c,i,p,o,s,r,function(){Ut({type:"clear-cookies"}),u(rt,i.students=[...i.students,c],i),gt()},function(){Ut({type:"clear-cookies",value:m}),u(rt,i.students=i.students.filter((t=>t.username!==c.username)),i),u(lt,c.commentIds=[],c),u(ct,d=[],d),n(2,p.src=s,p)},function(){confirm("Are you sure you want to discard all progress on this homework?")&&(u(rt,i=null,i),u(lt,c=null,c))},h,a,function(){i.dueDate=this.value,rt.set(i)},function(t){p=t,n(2,p)}]}class tn extends tt{constructor(t){super(),X(this,t,Xe,Qe,r,{})}}function en(t,e,n){let o,s,r,c,i;l(t,dt,(t=>n(0,o=t))),l(t,ct,(t=>n(1,s=t))),l(t,at,(t=>n(2,r=t))),l(t,it,(t=>n(3,c=t))),l(t,st,(t=>n(4,i=t)));const a=document.getElementById("comms"),d=new MutationObserver((t=>{function e(e){return!!t.find((t=>t.attributeName==="data-"+e))}if(e("deactivated"))u(dt,o=!1,o);else if(e("activated"))u(dt,o=!0,o);else if(e("newest-request")){const t=JSON.parse(a.dataset.newestRequest);u(ct,s=[t,...s],s)}else if(e("embedded-url")){const t=r;if(u(at,r=JSON.parse(a.dataset.embeddedUrl),r),Tt(t)!==Tt(r)){const t=r.substring(0,r.lastIndexOf("/"));u(it,c={},c),function(t,e,n){const o=new URLSearchParams;return o.append("token",n.token),o.append("ls","yes"),o.append("url",t),fetch(n.endpoint,{method:"post",body:o}).then((t=>t.json())).then((t=>t.result.split("\n").map((t=>t.split(" "))).map((t=>[t.shift(),t.join(" ")])).map((([t,n])=>({name:e+n.replace("./","/"),time:new Date(1e3*parseFloat(t))})))))}(r,t,i).then((t=>{t.forEach((({name:t,time:e})=>{u(it,c[encodeURI(t)]=e,c)})),it.set(c)})).catch((t=>{}))}}}));return d.observe(a,{attributes:!0}),O((()=>{d.disconnect()})),[]}class nn extends tt{constructor(t){super(),X(this,t,en,null,r,{})}}function on(e){let n,o,s,r,l,u,c,d;return{c(){n=f("h1"),n.textContent="Install extension",o=m("\n\nInstall the companion browser extension for\n"),s=f("a"),s.textContent="Firefox",r=m("\nor\n"),l=f("a"),l.textContent="Chrome",u=m("\nand\n\n"),c=f("a"),c.textContent="refresh",d=m("."),v(s,"href","https://github.com/jaflo/gradable/releases/latest/download/firefox-extension.xpi"),v(l,"href","https://chrome.google.com/webstore/detail/njijmdbjijgeodnhcnkknkeopbhfgpbg"),v(l,"target","_blank"),v(c,"href","")},m(t,e){i(t,n,e),i(t,o,e),i(t,s,e),i(t,r,e),i(t,l,e),i(t,u,e),i(t,c,e),i(t,d,e)},p:t,i:t,o:t,d(t){t&&a(n),t&&a(o),t&&a(s),t&&a(r),t&&a(l),t&&a(u),t&&a(c),t&&a(d)}}}class sn extends tt{constructor(t){super(),X(this,t,null,on,r,{})}}function rn(e){let n;return{c(){n=m("Checking for plugin...")},m(t,e){i(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function ln(e){let n,o;return n=new sn({}),{c(){K(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){Z(n,t)}}}function un(t){let e,n,o,s;const r=[dn,an,cn],l=[];function u(t,e){return null===t[2]?0:t[6]?1:2}return e=u(t),n=l[e]=r[e](t),{c(){n.c(),o=h()},m(t,n){l[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e===c?l[e].p(t,s):(Y(),W(l[c],1,1,(()=>{l[c]=null})),J(),n=l[e],n?n.p(t,s):(n=l[e]=r[e](t),n.c()),G(n,1),n.m(o.parentNode,o))},i(t){s||(G(n),s=!0)},o(t){W(n),s=!1},d(t){l[e].d(t),t&&a(o)}}}function cn(e){let n,o,s;return{c(){n=m("Plugin disconnected, did you open this website in another tab? Try\n\t\t"),o=f("a"),o.textContent="refreshing",s=m(" to retry."),v(o,"href","")},m(t,e){i(t,n,e),i(t,o,e),i(t,s,e)},p:t,i:t,o:t,d(t){t&&a(n),t&&a(o),t&&a(s)}}}function an(t){let e,n,o,s;const r=[pn,mn,fn],l=[];function u(t,e){return t[5]===t[0].Pending?0:t[5]===t[0].UpToDate?1:2}return e=u(t),n=l[e]=r[e](t),{c(){n.c(),o=h()},m(t,n){l[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e===c?l[e].p(t,s):(Y(),W(l[c],1,1,(()=>{l[c]=null})),J(),n=l[e],n?n.p(t,s):(n=l[e]=r[e](t),n.c()),G(n,1),n.m(o.parentNode,o))},i(t){s||(G(n),s=!0)},o(t){W(n),s=!1},d(t){l[e].d(t),t&&a(o)}}}function dn(e){let n,o;return n=new ne({}),{c(){K(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){Z(n,t)}}}function fn(e){let n,s,r,l;return{c(){n=m("Looks like your server script is out of date. Please run this\n\t\t\tcommand again:\n\t\t\t"),s=f("input"),s.readOnly=!0,v(s,"type","text"),s.value=Ht},m(t,e){i(t,n,e),i(t,s,e),r||(l=[g(s,"click",Mt),g(s,"focus",Mt)],r=!0)},p:t,i:t,o:t,d(t){t&&a(n),t&&a(s),r=!1,o(l)}}}function mn(t){let e,n,o,s;const r=[gn,hn],l=[];function u(t,e){return null!==t[1]?0:1}return e=u(t),n=l[e]=r[e](t),{c(){n.c(),o=h()},m(t,n){l[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e===c?l[e].p(t,s):(Y(),W(l[c],1,1,(()=>{l[c]=null})),J(),n=l[e],n?n.p(t,s):(n=l[e]=r[e](t),n.c()),G(n,1),n.m(o.parentNode,o))},i(t){s||(G(n),s=!0)},o(t){W(n),s=!1},d(t){l[e].d(t),t&&a(o)}}}function pn(e){let n;return{c(){n=m("Checking server version...")},m(t,e){i(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function hn(e){let n,o;return n=new Xt({}),{c(){K(n.$$.fragment)},m(t,e){V(n,t,e),o=!0},p:t,i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){Z(n,t)}}}function gn(t){let e,n,o,s;const r=[vn,$n],l=[];function u(t,e){return null!==t[7]?0:1}return e=u(t),n=l[e]=r[e](t),{c(){n.c(),o=h()},m(t,n){l[e].m(t,n),i(t,o,n),s=!0},p(t,s){let c=e;e=u(t),e!==c&&(Y(),W(l[c],1,1,(()=>{l[c]=null})),J(),n=l[e],n||(n=l[e]=r[e](t),n.c()),G(n,1),n.m(o.parentNode,o))},i(t){s||(G(n),s=!0)},o(t){W(n),s=!1},d(t){l[e].d(t),t&&a(o)}}}function $n(t){let e,n;return e=new ie({}),{c(){K(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function vn(t){let e,n;return e=new tn({}),{c(){K(e.$$.fragment)},m(t,o){V(e,t,o),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function bn(t){let e,n,o,s,r;const l=[un,ln,rn],u=[];function c(t,e){return t[3]?0:t[4]?1:2}return e=c(t),n=u[e]=l[e](t),s=new nn({}),{c(){n.c(),o=p(),K(s.$$.fragment)},m(t,n){u[e].m(t,n),i(t,o,n),V(s,t,n),r=!0},p(t,[s]){let r=e;e=c(t),e===r?u[e].p(t,s):(Y(),W(u[r],1,1,(()=>{u[r]=null})),J(),n=u[e],n?n.p(t,s):(n=u[e]=l[e](t),n.c()),G(n,1),n.m(o.parentNode,o))},i(t){r||(G(n),G(s.$$.fragment,t),r=!0)},o(t){W(n),W(s.$$.fragment,t),r=!1},d(t){u[e].d(t),t&&a(o),Z(s,t)}}}const yn="gradable-plugin-present";function wn(t,e,n){let o,s,r,u;l(t,rt,(t=>n(1,o=t))),l(t,st,(t=>n(2,s=t))),l(t,dt,(t=>n(6,r=t))),l(t,lt,(t=>n(7,u=t)));let c=document.body.classList.contains(yn),i=!1;function a(){d(),Ut({type:"register-active"})}function d(){o&&Ut({type:"set-homework-number",value:o.number})}var f;setTimeout((()=>n(4,i=!0)),400),new MutationObserver(((t,e)=>{t.find((t=>"class"===t.attributeName))&&document.body.classList.contains(yn)&&(n(3,c=!0),e.disconnect(),a())})).observe(document.body,{attributes:!0}),c&&a(),function(t){t[t.Pending=0]="Pending",t[t.OutOfDate=1]="OutOfDate",t[t.UpToDate=2]="UpToDate"}(f||(f={}));let m=f.Pending,p="";return t.$$.update=()=>{2&t.$$.dirty&&o&&o.number&&d(),261&t.$$.dirty&&s&&s.endpoint+s.token!==p&&(n(8,p=s.endpoint+s.token),function(t){const e=new URLSearchParams;return e.append("token",t.token),e.append("version","yes"),fetch(t.endpoint,{method:"post",body:e}).then((t=>t.json())).then((t=>{if(t.success)return!(t.version<3);throw new Error("Failed connection to server script.")}))}(s).then((t=>n(5,m=t?f.UpToDate:f.OutOfDate))).catch((t=>n(5,m=f.OutOfDate))))},[f,o,s,c,i,m,r,u,p]}return new class extends tt{constructor(t){super(),X(this,t,wn,bn,r,{})}}({target:document.body})}();
